---
description: Использование API консоли для программной отладки и профилирования кода
title: DevTools — консольный интерфейс API
author: MSEdgeTeam
ms.author: msedgedevrel
ms.date: 03/05/2020
ms.topic: article
ms.prod: microsoft-edge
keywords: Microsoft EDGE, веб-разработка, инструменты для F12, Devtools, консольный API
ms.custom: seodec18
ms.openlocfilehash: d722934c3694c3c23e367141158ad45f6d03b175
ms.sourcegitcommit: 6860234c25a8be863b7f29a54838e78e120dbb62
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 04/09/2020
ms.locfileid: "10572596"
---
# API консоли

*API консоли* предоставляет командную строку и программный доступ к консоли DevTools через Глобальный `console` объект, что позволяет:

 - [Регистрация настраиваемых сообщений](#logging-custom-messages) из кода
 - [Проверка объектов и элементов](#inspecting-objects-and-elements) и регистрация их данных
 - [Проверка и измерение кода](#testing-and-measuring) путем настройки утверждений, таймеров и счетчиков
 - [Создание снимков кучи](#taking-heap-snapshots) для оценки потребления памяти выполняющегося кода и выявления утечек памяти
 - [Трассировка callstacks](#tracing-callstacks) для понимания места вызова кода 
 - [Упорядочение данных журнала](#organizing-log-output) для упрощения отладки

Ниже указаны команды и параметры форматирования, которые в настоящее время поддерживаются в Microsoft Edge. Они работают точно так же, как и в крупных браузерах.

## Ведение журнала настраиваемых сообщений

Ваш код может отправлять на консоль различные типы настраиваемых сообщений, в том числе:

Тип сообщения  | &nbsp;   |
:------------------- | :------ |
[**Error ()**](https://developer.mozilla.org/docs/Web/API/Console/error) и [ **Exception ()**](https://developer.mozilla.org/docs/Web/API/Console/error)| Критические ошибки и сбои
[**warn ()**](https://developer.mozilla.org/docs/Web/API/Console/warn) | Возможные ошибки или неожиданные действия 
[**INFO ()**](https://developer.mozilla.org/docs/Web/API/Console/info) | Полезные (но не важные) сведения
[**log ()**](https://developer.mozilla.org/docs/Web/API/Console/log) и [ **Debug ()**](https://developer.mozilla.org/docs/Web/API/Console/log) | Общая Отладка (без создания системного значка оповещения на консоли)

   
Вы можете сгруппировать и отфильтровать эти данные вместе с другими сообщениями, созданными в Microsoft EDGE, на панели консоли. Для всех настраиваемых методов сообщений требуется параметр String (Message) и параметры подстановки для необязательного формата. Microsoft EDGE поддерживает следующие параметры форматирования:

Параметр Format (формат) | &nbsp;
:------------------- | :--- |
**% b** | Двоичный
**% c** | Встроенный стиль CSS (см. пример ниже)
**% d**, **% i** | целое число 
**% f** | Плавающий  
**% s** | Строка 
**% x** | Чисел 
**% e** | Водит 

Например, вот как можно включить строковые и целочисленные переменные в сообщение журнала:

```javascript
var myText = 'pieces';
var myVal = 5;
console.log("The number of %s is %d.", myText, myVal);
```

>`The number of pieces is 5.`

Вот как можно добавить зеленый эффект подсветки в сообщение журнала с помощью встроенного CSS ( `%c` ):

```javascript
console.log("%cHighlight this log message in green", "background-color: #10ff00; text-transform: uppercase;");
```

![Журнал консоли с встроенными стилями](../media/console_api_css.png)

## Проверка объектов и элементов

Проверяемые объекты отображаются на консоли в свернутом виде дерева с развернутыми узлами. Консоль определяет, отправляет ли вы узел DOM (например, DIV) или объект JavaScript (например, событие) и автоматически отображает их как обнаруженный тип.

Вы также можете принудительно использовать определенные выходные данные:

Команда | &nbsp;
:------------------- | :--- |
[**dir ()**](https://developer.mozilla.org/docs/Web/API/Console/dir) | Отображает как объект JavaScript, который вы изучите
[**dirxml()**](https://developer.mozilla.org/docs/Web/API/Console/dirxml) | Отображается как узел DOM, который вы проверили

Например, попробуйте открыть консоль и сравните следующие выходные элементы для `<div id='main'>` элемента на этой странице:

```javascript
console.dir(document.querySelector('#main'));
console.dirxml(document.querySelector('#main'));
```

![Сравнение выходных данных "Dir" и "DirXML"](../media/console_api_dir.png)

### Выбор элемента на панели « **элементы** »

Вы можете выбрать элемент в контекстном дереве HTML страницы прямо из консоли для немедленной отладки макета и стиля.

Команда | &nbsp;
:------------------- | :--- |
**SELECT ()** | Переключение на панель **элементов** и установка фокуса на указанный элемент.

Например, если открыть консоль на этой странице, введите следующую команду:

```javascript
console.select(document.querySelector("body"));
```

DevTools перейдет на панель **элементы** (если она еще не является текущей) и установите фокус в [*представлении в виде дерева HTML*](../elements.md#html-tree-view) на указанный элемент.

![Пример метода "Select"](../media/console_api_select.png)

## Тестирование и измерение

### Тестирование кода

Добавляйте утверждения тестового API-интерфейса для модульного тестирования и отладки кода при его выполнении в браузере.

Команда | &nbsp;
:------------ | :-------------
[**Assert ()**](https://developer.mozilla.org/docs/Web/API/Console/assert) | Заносит в журнал сообщение об ошибке консоли, если указанное выражение имеет *значение false*.

В дополнение к логическому выражению, которое вы используете для тестируемого утверждения, вы можете добавить дополнительное сообщение и параметры форматирования, как и в случае с другими [настраиваемыми сообщениями консоли](#logging-custom-messages). Пример

```javascript
var x = 26.8;
console.assert(x < 25, 'The value of x is %f (it is NOT less than %i)', x, 25);
```

![Пример метода Assert](../media/console_api_assert.png)

### Подсчет выполнения в коде

Вы можете настроить в коде счетчики, чтобы следить за тем, сколько вхождений окружающего кода выполняется. С помощью счетчиков можно убедиться, что ваш код работает должным образом и поможет диагностировать узкие места производительности.

Команда | &nbsp;
:------------ | :-------------
[**Count ()**](https://developer.mozilla.org/docs/Web/API/Console/count) | Увеличивается и записывает количество операций *Count ()* для данной метки.
[**countReset()**](https://developer.mozilla.org/docs/Web/API/Console/countReset) | Сбрасывает количество на ноль для заданной метки счетчика.

Например, выполните следующие строки на консоли:

```javascript
console.count('My Counter');
console.count('My Counter');
console.countReset('My Counter');
console.count('My Counter');
```

 . . . Это приведет к следующим результатам:
> Мой счетчик: 1

### Синхронизация кода

Инструментировать код с помощью помеченных таймеров, чтобы оценить время, необходимое для выполнения данной операции.

Команда | &nbsp;
:------------ | :-------------
[**Time ()**](https://developer.mozilla.org/docs/Web/API/Console/time) | Запускает таймер с заданной меткой.
[**timeEnd()**](https://developer.mozilla.org/docs/Web/API/Console/timeEnd) | Завершает таймер с заданной меткой и показывает затраченное время (в миллисекундах).
[**timeStamp ()**](https://developer.mozilla.org/docs/Web/API/Console/timeStamp) | Показывает текущее системное время (в миллисекундах).

Например, попробуйте выполнить следующие строки на консоли:

```javascript
console.time('My Timer');
console.timeEnd('My Timer');
```

### Создание снимков кучи

Создание снимков кучи для оценки потребления памяти запущенного кода и выявления утечек памяти.

Команда | &nbsp;
:------------ | :-------------
**takeHeapSnapshot()** | Захватывает сведения о текущей куче JavaScript и ее выделенных объектах.

Для получения снимков кучи необходимо, чтобы выполнялось приложение DevTools [Memory Profiler](../memory.md#toolbar) . Каждый из них будет отображаться в виде плитки в [*сводке моментальных снимков*](../memory.md#snapshot-summary) панели [**памяти**](../memory.md) для дальнейшей проверки.

## Трассировка callstacks

Сведения о том, где выполняется вызов вашего кода, о том, что он работает, а также о том, как долго выполнение программы может быть полезно при анализе slowness или неожиданного поведения. Трассировка стека показывает путь выполнения, по которому ваш код пройдет за него, из запроса трассировки вверх по пути. 

Команда | &nbsp;
:------------ | :-------------
[**Trace ()**](https://developer.mozilla.org/docs/Web/API/Console/trace) | Выводит трассировку стека обработки текущего выполнения сценария.

Например, для запуска следующего кода на консоли:

```javascript
function a(){
  c();
}
function b(){
  c();
}
function c(){
  console.trace()
}
function d(){
  b();
}

a();
d();
```

. . . будут выводиться следующие трассировки стека:
> Console. Trace () на c (код eval: 8:3) на этапе (eval Code: 2:3) на этапе оценки кода (код eval: 14:1)
> 
> Console. Trace () в c (eval код: 8:3) на странице b (eval Code: 5:3) на d (eval Code: 11:3) на этапе оценки кода (eval: 15:1)

## Упорядочение выходных данных журнала

Для простого удаления всех предыдущих выходных данных на консоли используйте *Console. Clear ()* (или `CTRL + L` ). Это не очищает историю команд консоли (вы по-прежнему можете обойти ее с помощью клавиш со стрелками вверх и вниз).

Команда | &nbsp;
:------------ | :-------------
[**Clear ()**](https://developer.mozilla.org/docs/Web/API/Console/clear) | Очистка всех предыдущих выходных данных на консоли.

Если ваш код выводит большое количество сообщений консоли, вы можете визуально упорядочивать их по вложенным блокам с помощью следующих команд:

 Команда | &nbsp;
:------------ | :-------------
[**Group ()**](https://developer.mozilla.org/docs/Web/API/Console/group) | Запускает новый уровень вложенности для вывода на консоль с указанной (необязательной) меткой.
[**groupCollapsed()**](https://developer.mozilla.org/docs/Web/API/Console/groupCollapsed) | Запускает новый уровень вложенности для вывода на консоль с указанной (необязательной) меткой, но элемент управления группированием по умолчанию свернут и должен быть развернут (с помощью элемента управления стрелками), чтобы отобразить дочерний вывод.
[**groupEnd()**](https://developer.mozilla.org/docs/Web/API/Console/groupEnd) | Завершает группу вложений для указанной метки.

Например, попробуйте ввести на консоли следующие команды:

```javascript
console.groupCollapsed('Group 1');
console.log('In Group 1');
console.groupCollapsed('Group 1.1');
console.log('In Group 1.1');
console.groupEnd('Group 1.1');
console.groupEnd('Group 1');
console.log('No longer in a group');
```

. . . затем разверните элементы управления *Group 1* и *Group 1,1* , чтобы увидеть, как вложенные комментарии в журнале.

![Группировка сообщений на консоли](../media/console_api_group.png)

Иногда проще визуализировать объект или массив JavaScript в табличной форме, а не в виде плоского списка. Для этого можно использовать команду *Console. Table ()* :

Команда | &nbsp;
:------------ | :-------------
[**Table ()**](https://developer.mozilla.org/docs/Web/API/Console/table) | Выводит предоставленный массив или объект на консоль в табличной форме.

Например, в приведенном ниже массиве объектов:

```javascript
var orders = [{'Size':'XL', 'Quantity':1},{'Size':'M', 'Quantity':3}, {'Size':'L', 'Quantity':2}];
console.table(orders);
```

. . . выводится в этой таблице на консоли:

![Отображение массива объектов в виде таблицы на консоли](../media/console_api_table.png)
