---
description: Использование панели "сотрудники службы" для управления и отладки сотрудников службы
title: DevTools — отладчик — сотрудники служб
author: MSEdgeTeam
ms.author: msedgedevrel
ms.date: 03/05/2020
ms.topic: article
ms.prod: microsoft-edge
keywords: Microsoft EDGE, веб-разработка, инструменты для F12, Devtools, отладчик, отладка, PWA, служебный сотрудник, API кэша
ms.custom: seodec18
ms.openlocfilehash: 8e1fa62358657a47ce40d0742f95a76f2586d0c8
ms.sourcegitcommit: 6860234c25a8be863b7f29a54838e78e120dbb62
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 04/09/2020
ms.locfileid: "10571726"
---
# <span data-ttu-id="df174-104">Обслуживание сотрудников</span><span class="sxs-lookup"><span data-stu-id="df174-104">Service Workers</span></span>

<span data-ttu-id="df174-105">На панели " **сотрудники службы** " есть инструменты для управления и отладки рабочих процессов служб для сайта, которые помогут вам:</span><span class="sxs-lookup"><span data-stu-id="df174-105">The **Service Workers** panel has tools for managing and debugging the service workers for your site, to help you:</span></span>

 - <span data-ttu-id="df174-106">Ознакомьтесь со всеми сотрудниками служб, связанными с сайтом, и подробными сведениями об их области и состоянии</span><span class="sxs-lookup"><span data-stu-id="df174-106">Get an overview of all the service workers associated with your site and details of their scope and status</span></span>
 - <span data-ttu-id="df174-107">**Обновление** и управление (**Отмена регистрации**) регистрация рабочего процесса службы для указанной области</span><span class="sxs-lookup"><span data-stu-id="df174-107">**Update** and manage (**Unregister**) the service worker registration for the given scope</span></span>
 - <span data-ttu-id="df174-108">**Отправка** тестового уведомления</span><span class="sxs-lookup"><span data-stu-id="df174-108">**Push** a test notification</span></span>
 - <span data-ttu-id="df174-109">**Остановить** / **Запуск** отдельных сотрудников службы и</span><span class="sxs-lookup"><span data-stu-id="df174-109">**Stop**/**Start** individual service workers, and</span></span>
 - <span data-ttu-id="df174-110">**Проверка** выбранного сотрудника службы в отдельном окне отладчика</span><span class="sxs-lookup"><span data-stu-id="df174-110">**Inspect** the selected service worker in a separate debugger window</span></span>

![Область "Общие сведения о сотруднике службы"](./media/service_worker.png)

<span data-ttu-id="df174-112">Обратите внимание на следующие сведения об отладке рабочих процессов службы в EDGE DevTools:</span><span class="sxs-lookup"><span data-stu-id="df174-112">Please note the following about service worker debugging in Edge DevTools:</span></span>

 - <span data-ttu-id="df174-113">При отладке сотрудника службы будет запущен новый экземпляр DevTools отдельно от инструментов страницы, так как работники служб могут совместно работать на нескольких вкладках.</span><span class="sxs-lookup"><span data-stu-id="df174-113">Debugging a service worker will launch a new instance of the  DevTools separate from the page's tools because service workers can be shared across multiple tabs.</span></span>
 - <span data-ttu-id="df174-114">[**Элементы**](./elements.md) и панели [**эмуляции**](./emulation.md) отсутствуют в отладчике рабочих процессов служб, если сотрудники служб работают в фоновом режиме и не управляют непосредственно интерфейсом приложения.</span><span class="sxs-lookup"><span data-stu-id="df174-114">The [**Elements**](./elements.md) and [**Emulation**](./emulation.md) panels are absent from the service worker debugger, given that service workers run in the background and do not directly control the front-end of your app.</span></span>
 - <span data-ttu-id="df174-115">В настоящее время сетевой трафик для сотрудника службы сообщается только из экземпляра отладки DevTools для этого исполнителя, а не из экземпляра отладчика для самой страницы.</span><span class="sxs-lookup"><span data-stu-id="df174-115">Currently network traffic for a service worker is only reported from the  DevTools debugging instance for that worker, and not from the debugger instance for the page itself.</span></span>
 - <span data-ttu-id="df174-116">Чтобы смоделировать **принудительную** отправку из DevTools, вам нужно будет добавить прослушиватель *извещающих* событий к сотруднику службы, чтобы увидеть его эффект.</span><span class="sxs-lookup"><span data-stu-id="df174-116">To simulate a **Push** from the DevTools, you'll need to add a *push* event listener to your service worker in order to observe its effect.</span></span> <span data-ttu-id="df174-117">В приведенном ниже примере на **консоли**обслуживания рабочих процессов выводится сообщение "Проверка push-сообщения от DevTools".</span><span class="sxs-lookup"><span data-stu-id="df174-117">The following example will print "Test push message from DevTools" in your service worker **Console**.</span></span>

   ```JavaScript
   self.addEventListener('push', function(event){
       console.log(event.data.text());
   });
   ```

<span data-ttu-id="df174-118">Ниже приведены некоторые общие моменты, которые необходимо учитывать при использовании рабочих процессов.</span><span class="sxs-lookup"><span data-stu-id="df174-118">Here are some general things to keep in mind when using service workers:</span></span>

- **<span data-ttu-id="df174-119">Только HTTPS.</span><span class="sxs-lookup"><span data-stu-id="df174-119">HTTPS-only.</span></span>** <span data-ttu-id="df174-120">Работники служб не работают в HTTP; Вам потребуется использовать протокол HTTPS.</span><span class="sxs-lookup"><span data-stu-id="df174-120">Service workers will not work in HTTP; you will need to use HTTPS.</span></span> <span data-ttu-id="df174-121">Однако вы можете зарегистрировать сотрудников обслуживания `localhost` для целей тестирования.</span><span class="sxs-lookup"><span data-stu-id="df174-121">However, you can register service workers on `localhost` for testing purposes.</span></span>

- **<span data-ttu-id="df174-122">Доступ к DOM не разрешен.</span><span class="sxs-lookup"><span data-stu-id="df174-122">No DOM access allowed.</span></span>** <span data-ttu-id="df174-123">Как и в случае с веб-сотрудниками, вы не получаете доступ к объектной модели страницы.</span><span class="sxs-lookup"><span data-stu-id="df174-123">As with web workers, you don't get access to the page's object model.</span></span> <span data-ttu-id="df174-124">Это означает, что если вам нужно изменить что-либо о странице, вам потребуется использовать ее [`postMessage`](https://developer.mozilla.org/docs/Web/API/Worker/postMessage) из сотрудника службы, чтобы можно было обрабатывать изменения DOM на странице.</span><span class="sxs-lookup"><span data-stu-id="df174-124">This means that if you need to change something about the page, you'll need to use [`postMessage`](https://developer.mozilla.org/docs/Web/API/Worker/postMessage) from the service worker to the page so that you can handle it DOM changes from the page.</span></span>

- **<span data-ttu-id="df174-125">Выполняется отдельно от страницы.</span><span class="sxs-lookup"><span data-stu-id="df174-125">Executes separate from page.</span></span>** <span data-ttu-id="df174-126">Поскольку эти сценарии не привязаны к жизненному циклу страницы, важно понимать, что они не используют тот же контекст, что и страница.</span><span class="sxs-lookup"><span data-stu-id="df174-126">Because these scripts are not tied to the lifetime of a page, it's important to understand that they do not share the same context as the page.</span></span> <span data-ttu-id="df174-127">Помимо того, что у вас нет доступа к модели DOM (как сказано выше), они не смогут получить доступ к тем же переменным, доступным на странице.</span><span class="sxs-lookup"><span data-stu-id="df174-127">Aside from not having access to the DOM (as stated earlier), they won't have access to the same variables available on the page.</span></span>

- **<span data-ttu-id="df174-128">Переопределяет *кэш приложения*.</span><span class="sxs-lookup"><span data-stu-id="df174-128">Overrides *App Cache*.</span></span>** <span data-ttu-id="df174-129">При использовании служебных сотрудников служба кэша приложений будет игнорироваться.</span><span class="sxs-lookup"><span data-stu-id="df174-129">App Cache will be ignored when service workers are in use.</span></span> <span data-ttu-id="df174-130">API рабочего процесса службы предназначен для полной замещения кэша приложения, благодаря чему более детально управлять веб-разработчиком.</span><span class="sxs-lookup"><span data-stu-id="df174-130">The Service Worker API is intended to entirely supplant App Cache  by giving more granular control to the web developer.</span></span>

  - **<span data-ttu-id="df174-131">Сценарий не может находиться в сети CDN.</span><span class="sxs-lookup"><span data-stu-id="df174-131">Script can't be on CDN.</span></span>** <span data-ttu-id="df174-132">Файл JavaScript для сотрудника службы не может размещаться в сети распространения содержимого (CDN), он должен находиться в том же домене, что и страница.</span><span class="sxs-lookup"><span data-stu-id="df174-132">The JavaScript file for the service worker can't be hosted on a Content Distribution Network (CDN), it must be on the same domain as the page.</span></span> <span data-ttu-id="df174-133">Однако при желании вы можете импортировать сценарии из сети CDN.</span><span class="sxs-lookup"><span data-stu-id="df174-133">However, if you like, you can import scripts from your CDN.</span></span>

- **<span data-ttu-id="df174-134">Может быть прекращено в любое время.</span><span class="sxs-lookup"><span data-stu-id="df174-134">Can be terminated any time.</span></span>** <span data-ttu-id="df174-135">Работники служб должны быть короткими, и их жизненный цикл привязан к событиям.</span><span class="sxs-lookup"><span data-stu-id="df174-135">Service workers are meant to be short-lived and their lifetime is tied to events.</span></span> <span data-ttu-id="df174-136">В частности, у работников-служб есть ограничение по времени, в течение которого они должны закончить выполнение обработчиков событий.</span><span class="sxs-lookup"><span data-stu-id="df174-136">In particular, service workers have a time limit in which they must finish executing their event handlers.</span></span> <span data-ttu-id="df174-137">В других случаях браузер или операционная система может завершить работу сотрудника службы, который влияет на батарею, ЦП или потребление памяти.</span><span class="sxs-lookup"><span data-stu-id="df174-137">In other cases, the browser or the operating system may choose to terminate a service worker that impacts the battery, CPU, or memory consumption.</span></span> <span data-ttu-id="df174-138">В любом случае следует избегать использования глобальных переменных в сценарии обслуживания рабочих процессов на случай, если в последующем обрабатываемом событии используется другой экземпляр рабочего процесса службы.</span><span class="sxs-lookup"><span data-stu-id="df174-138">In either case, avoid relying on global variables in the service worker script in case a different service worker instance is used on a subsequent event that's being handled.</span></span>

- **<span data-ttu-id="df174-139">Разрешены только асинхронные запросы.</span><span class="sxs-lookup"><span data-stu-id="df174-139">Only asynchronous requests allowed.</span></span>** <span data-ttu-id="df174-140">Синхронные XHR не разрешены здесь!</span><span class="sxs-lookup"><span data-stu-id="df174-140">Synchronous XHR is not allowed here!</span></span> <span data-ttu-id="df174-141">Ни один из них не является localStorage, поэтому лучше использовать IndexedDB и API нового кэша, описанные выше.</span><span class="sxs-lookup"><span data-stu-id="df174-141">Neither is localStorage, so it's best to make use of IndexedDB and the new Caches API described earlier.</span></span>

- **<span data-ttu-id="df174-142">Сервисный исполнитель в область — 1:1.</span><span class="sxs-lookup"><span data-stu-id="df174-142">Service worker to scope is 1:1.</span></span>** <span data-ttu-id="df174-143">Вам будет доступен только один исполнитель обслуживания для одной области.</span><span class="sxs-lookup"><span data-stu-id="df174-143">You'll only be able to have one service worker per scope.</span></span> <span data-ttu-id="df174-144">Это означает, что при попытке зарегистрировать другого сотрудника службы для области, уже имеющей сотрудник службы, этот сотрудник службы будет обновлен.</span><span class="sxs-lookup"><span data-stu-id="df174-144">That means if you try to register a different service worker for a scope that already has a service worker, that service worker will be updated.</span></span>
