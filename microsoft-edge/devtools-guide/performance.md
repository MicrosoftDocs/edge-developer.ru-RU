---
description: Использование панели "производительность" для анализа responsivenes страницы во время взаимодействия с пользователем
title: DevTools — производительность
author: MSEdgeTeam
ms.author: msedgedevrel
ms.date: 03/05/2020
ms.topic: article
ms.prod: microsoft-edge
keywords: Microsoft EDGE, веб-разработка, инструменты для F12, Devtools, производительность, профиль, частота кадров, кадровая Загрузка, использование ЦП, выполнение JavaScript
ms.custom: seodec18
ms.openlocfilehash: aecf3cf49592dbf1f24231e76f14ddc2ca1228c3
ms.sourcegitcommit: 6860234c25a8be863b7f29a54838e78e120dbb62
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 04/09/2020
ms.locfileid: "10571743"
---
# Производительность

На панели **Performance** есть инструменты для профилирования и анализа скорости реагирования пользовательского интерфейса во время взаимодействия с пользователем. С его помощью вы можете:

 - [Измерение времен выполнения](#recording-a-profile) различных компонентов страницы 
 - [Детализация до того места, где вы тратите больше циклов ЦП](#timeline-ruler) , чтобы запустить свою страницу и получить конечный эффект для пользователей
 - [Получение пошагового разбиения процессов](#timeline-details) , использующих время выполнения страницы 
 - Пошаговые инструкции для выявления ресурсоемких операций, например требующих пересчетов в макете, можно [проанализировать с помощью стеков вызовов JavaScript](#javascript-call-stacks) . 

![Панель "производительность DevTools"](./media/performance.png)

## Запись профиля

Первым шагом для анализа производительности страницы является создание профиля при выполнении определенного пользовательского сценария, например этапов воспроизведения ошибки производительности, которую вы пытаетесь устранить, или типичного варианта использования, который вы хотите оптимизировать для более удобного взаимодействия с пользователем. 

### панель инструментов;

С помощью кнопок " **начать**  /  **остановить** " на панели инструментов (или `Ctrl+E` ) можно инициировать и завершать трассировку производительности. Зеленый индикатор будет apear на вкладке " **производительность** ", чтобы указать, что запись выполняется. 

![Панель инструментов "панель производительности"](./media/performance_toolbar.png)

Отчет о производительности будет создан при остановке профиля. Вы можете сохранить его на диске ( `Ctrl+S` ) и перезагрузить ( `Ctrl+O` ) в DevTools позже.  Сеансы диагностики DevTools сохраняются с расширением *diagsession* .

Ниже перечислены некоторые моменты, которые необходимо учитывать при записи профиля.

- Выполнение минимальных действий, необходимых для захвата сценария, который вы пытаетесь проанализировать. Внешние действия со страницей порождают дополнительные данные и несрочные результаты.

- Профилировщик автоматически помечает основные события жизненного цикла приложения в отчете, такие как Навигация по страницам, [DOMContentLoaded](https://developer.mozilla.org/docs/Web/Events/DOMContentLoaded)и [Загрузка](https://developer.mozilla.org/docs/Web/Events/load)страницы. Вы можете добавить пользовательские маркеры, вызвав метод [Performance. Mark ()](https://developer.mozilla.org/docs/Web/API/Performance/mark) в коде или консоли. 

- Если начальные значения загрузок страницы важны для анализа, не забудьте очистить кэш браузера (на панели [Network](./network.md) ), чтобы обеспечить загрузку всех ресурсов страниц из сети.

- Иногда она позволяет записывать несколько сеансов и (или) один и тот же сценарий на разных компьютерах для лучшего понимания проблем с производительностью с учетом подстановки.

## Линейка временной шкалы

Временная шкала действует в качестве скользящей линейки. Используйте его, чтобы ограничить область отчета определенным периодом (или охватом событий). Перетащите черные **Слайды** , чтобы ограничить диапазон времени, в котором вы хотите исследовать и отфильтровать избыточные данные профилирования с помощью отчетов " [временная шкала](#timeline-details) " и " [Стек вызовов JavaScript](#javascript-call-stacks) " в *области сведений*. 

На линейке вы увидите два типа маркеров:

 - **Метки жизненного цикла приложения** на временной шкале (например, Навигация по страницам, [DOMContentLoaded](https://developer.mozilla.org/docs/Web/Events/DOMContentLoaded)и [Загрузка](https://developer.mozilla.org/docs/Web/Events/load)страницы) автоматически регистрируются при записи профиля.

 - Пользовательские **метки** — это специальные маркеры, которые можно добавлять с помощью вызова метода [Performance. Mark ()](https://developer.mozilla.org/docs/Web/API/Performance/mark) в коде или на [**консоли**](./console.md)DevTools. Вы можете сгруппировать *начальные* и *конечные* метки вместе в виде одной именованной меры с помощью метода [Performance. Measure ()](https://developer.mozilla.org/docs/Web/API/Performance/measure) . 

После того как вы выберете диапазон времени, вы можете **увеличить** масштаб на панели инструментов или **сбросить масштаб** и **снять выделение** , чтобы вернуться к полному представлению трассировки производительности (без выбранного временного интервала). Эти элементы управления также доступны в контекстном меню, которое можно щелкнуть правой кнопкой мыши.

![Временная шкала панели "производительность"](./media/performance_timeline.png)

### Использование ЦП

На графике% временной шкалы **ЦП** описаны ресурсы обработки, потребляемые различными подсистемами браузера, необходимыми для запуска страницы, которая разбивается по категориям.

#### Загрузка
Указывает время, затраченное на получение ресурсов приложения и синтаксический анализ HTML и CSS. Сюда могут относиться сетевые запросы. Ниже перечислены события, которые регистрируются на [временной шкале](#timeline-details).

Событие | Описание
:------------ | :-------------
CssParsing  | Обнаружено новое содержимое CSS, которое требовалось проанализировать.
HtmlParsing | Обнаружено новое HTML-содержимое, которое требовалось разбить на узлы и вставить в DOM.
Вызова | В модели DOM обнаружен удаленный ресурс, а для него был создан XMLHttpRequest, который требовал запроса HTTP.
HtmlSpeculativeDownloading | В HTML-содержимом страницы был выполнен поиск необходимых ресурсов, чтобы можно было максимально быстро планировать HTTP-запросы для них.


#### Сценариев
Указывает время, затраченное на анализ и выполнение JavaScript. Сюда входят события DOM, таймеры, вычисление сценариев и обратные вызовы кадров анимации. Ниже перечислены события, которые регистрируются на [временной шкале](#timeline-details).

Событие | Описание
:------------ | :-------------
DomEvent | Для объекта DOM инициировано событие.
EvaluatingScript | `<script>`В модели DOM обнаружен новый элемент, который необходимо проанализировать и выполнить.
EventHandler | Зарегистрированный прослушиватель событий был активирован в ответ на инициированное событие DOM.
Кадр | Во время подготовки нового кадра был активирован зарегистрированный обратный вызов, чтобы он мог вносить изменения в визуальные элементы.
Измерение | Сценарий, зависящий от приложения, был измерен с помощью `performance.measure()` метода.
MediaQueryListener | Зарегистрированный запрос мультимедиа был аннулирован, что привело к выполнению связанных с ним прослушивателей (-ов).
MutationObserver | Один или несколько замеченных элементов DOM были изменены, что привело к выполнению обратного вызова MutationObserver.
TimerFired | Запланированный таймер, который привел к выполнению связанного с ним обратного вызова.
WindowsRuntimeAsyncCallback | Асинхронная операция выполнена объектом среды выполнения Windows, который инициировал `Promise` обратный вызов.
WindowsRuntimeEvent | Событие, инициированное в объекте среды выполнения Windows, который инициировал зарегистрированный прослушиватель.

#### УДАЛЯЕТ
Указывает время, затраченное на сбор памяти для объектов, которые больше не используются. Ниже перечислены события, которые регистрируются на [временной шкале](#timeline-details).

Событие | Описание
:------------ | :-------------
Сборка мусора | Среда выполнения JavaScript, исдействующая текущее использование памяти приложения, позволяет определить, какие объекты больше не содержат ссылки и, следовательно, они будут собраны.

#### Дизайн
Показывает время, затраченное на вычисление представления и макета элемента. Ниже перечислены события, которые регистрируются на [временной шкале](#timeline-details).

Событие | Описание
:------------ | :-------------
AlignedBeat | Ожидающие визуальные изменения, внесенные в DOM, были обработаны таким образом, чтобы было Обновлено отображение приложения.
CssCalculation | Были добавлены изменения модели DOM или нового содержимого CSS, требующие пересчета свойств стиля всех затронутых элементов.
Макет | В модель DOM были внесены изменения, которые требовали для вычисления размера и/или положения всех затронутых элементов.

#### Отрисовки
Указывает время, затраченное на рисование экрана. Ниже перечислены события, которые регистрируются на [временной шкале](#timeline-details).

Событие | Описание
:------------ | :-------------
Paint | В модель DOM внесены визуальные изменения, которые требовали перерисовки всех затронутых частей страницы.
RenderLayer | Визуальные изменения были внесены в независимый фрагмент модели DOM (слой), который потребовал бы перерисовывать соответствующую часть страницы.

#### Декодирование изображений
Указывает время, затраченное на распаковку и декодирование изображений. Ниже перечислены события, которые регистрируются на [временной шкале](#timeline-details).

Событие | Описание
:------------ | :-------------
ImageDecoded | Вы включили в модель DOM изображение, которое требуется распаковать из исходного формата в точечный рисунок.

### Визуальная пропускная способность

На графике **визуальной пропускной способности** отображаются оценочные *кадры в секунду* (кадр/с) в течение сценария профилирования, где 60 кадров — идеальная скорость отображения. DIP в частоте кадров обозначают узкие места производительности и частоту кадров, равной нулю, означает, что кадры удаляются полностью.

## Сведения о временной шкале

С помощью области сведений последним из выделенных вы можете полностью разобраться в том, что произошло на странице. Вкладка " **сведения о временной шкале** " обеспечивает разделение событий, произошедших в различных подсистемах браузера.

![Область сведений о временной шкале производительности](./media/performance_details_timeline.png)

1. **Элемент управления Сортировка списка событий**

    С помощью элемента управления " **Сортировать по** раскрывающимся [списком](#event-list) " можно переключаться между *временем начала* или *длительностью (включительно*). Это также изменит представление [выбранных данных временной шкалы](#selected-timeline-details).

2. **Группировка событий по кадрам**

    С помощью **групп событий верхнего уровня в кадрах** можно включить группировку событий верхнего уровня (*разбора HTML, макет, событие DOM и* т. д.) в соответствующую единицу работы (или кадру) в течение периода времени, в течение которого происходили анимации и визуальные обновления. Кадры обрабатываются так же, как и другие события, поэтому они могут быть отсортированы и отфильтрованы и при выборе в [списке событий](#event-list)выводятся сведения о *затраченном времени* .

3. **Элементы управления фильтра списка событий**

    С помощью меню " **Фильтрация событий** " можно настроить типы событий, отображаемых в [сведениях о временной шкале](#timeline-details). 

    ![Элемент управления для фильтрации событий производительности](./media/performance_filter_events.png) 

    Доступны следующие фильтры:

   - **Декодирование изображений**: Показать события, которые произошли в фоновом потоке (например, декодирование изображений, сборка мусора). 
   - **Сетевой трафик**: показать HTTP-запросы, которые были привязаны к сети.
   - **Действия с ИП**: отображение событий, которые произошли в ПОТОКЕ пользовательского интерфейса и (или) потоке обработки (например, обработчики событий DOM, макет).
   - **Пользовательские меры**: отображение пользовательских событий, указывающих на вызов метода Performance. Measure ().

     Вы можете дополнительно отфильтровать события верхнего уровня по инклюзивной длительности.

### Список событий

*Список событий* предоставляет хронологию списка [событий подсистемы браузера](#cpu-utilization) , которые произошли в течение выбранного периода времени. 

Щелкните любую запись, чтобы заполнить **выбранную диаграмму сведений о событии** для этого элемента. Элементы с вложенными событиями и функциями покажут их **инклюзивность** (время *,* затраченное на выполнение функции и любых других вызываемых функций) и **эксклюзивное** время, которое будет отображаться на диаграмме в рамках самой функции.

Щелкните правой кнопкой мыши любую запись, чтобы открыть контекстное меню, чтобы отфильтровать временную шкалу только для этого события и просмотреть исходный код, ответственный за событие в [**отладчике**](./debugger.md) (или на панели [**элементов**](./elements.md) , если это применимо).

### Выбранные сведения о временной шкале

*Выбранные сведения о временной шкале* — это подробный линейчатой график событий с инклюзивными и эксклюзивными значениями в течение выбранного интервала времени. При сортировке по *длительности (включительно)* с помощью **элемента управления Sort списка событий**наиболее продолжительные события будут визуально выделены на этой диаграмме. 

### Сведения о выбранном событии

Этот отчет содержит дополнительные сведения о выбранном событии, включая *время запуска*, тип выполняемого потока (например, *скачивание*, *Пользовательский интерфейс*, *визуализация*) и другие контекстные сведения, относящиеся к конкретному типу события. Например, типы *прослушивателей событий* предоставляют ссылки отладчика на *функцию обратного вызова* и *планирование стека вызова*.

## Стеки вызовов JavaScript

![Временные показатели производительности для стеков вызовов JavaScript](./media/performance_details_javascript.png)

На вкладке **стеки вызовов JavaScript** содержатся сведения об использовании ЦП и временные показатели функций сценария, которые выполнялись в выбранный диапазон времени:

 Столбец | Описание
:------------ | :-------------
Имя функции | Имя браузера или пользовательской функции.
Инклюзивный ЦП (%) | Процент выбранных действий ЦП в этой функции и в функциях, вызываемых этой функцией.
Эксклюзивный ЦП (%) | Процент выбранной активности ЦП в этой функции, исключая действия в функциях, вызываемых этой функцией.
Инклюзивный ЦП (МС) | Время ЦП, затраченное на выполнение кода в этой функции и в функциях, вызываемых этой функцией.
Исключительный ЦП (МС) | Время ЦП, затраченное на выполнение кода в этой функции, за исключением времени в функциях, вызываемых этой функцией.
URL-адрес | URL-адреса, в которых произошел кадр стека. Вызовы функций, исходящие из браузера (стандартизированные веб-API), помечены как *[DOM]*.

## Горячие

| Действие                         | Появивше     |
|:-------------------------------|:-------------|
| Запуск и остановка сеанса профилирования | `Ctrl` + `E` |
| Импорт сеанса профилирования       | `Ctrl` + `O` |
| Экспорт сеанса профилирования       | `Ctrl` + `S` |

## Известные проблемы

### Произошла ошибка при запуске сеанса профилирования

Если отображается это сообщение об ошибке: **при запуске сеанса профилирования** в средстве производительности возникла ошибка, выполните указанные ниже действия для решения этой проблемы.

1. Нажмите клавишу `Windows Key`  +  `R` .

2. В диалоговом окне Выполнить введите **Services. msc**.
![Известные проблемы – 1](./media/known_issues_1.PNG)

3. Найдите **стандартную службу сборщика центра диагностики Microsoft (R)** и щелкните ее правой кнопкой мыши.
![Известные проблемы – 2](./media/known_issues_2.PNG)

4. Перезапустите **стандартную службу сборщика центра диагностики Microsoft (R)**.
![Известные проблемы – 3](./media/known_issues_3.PNG)

5. Закройте инструменты разработчика Microsoft EDGE и вкладку. Откройте новую вкладку, перейдите на нужную страницу и нажмите клавишу `F12` .

6. Теперь вы сможете начать профилирование.
![Известные проблемы — 4](./media/known_issues_4-performance.PNG)

Вы по-прежнему столкнулись с проблемами? Пожалуйста, отправьте нам свой отзыв с помощью значка " **Отправить отзыв** "! 

![Известные проблемы – 5](./media/known_issues_5.PNG)

### Произошла ошибка при остановке сеанса профилирования.

Если отображается это сообщение об ошибке: **при остановке сеанса профилирования** в средстве производительности произошла ошибка, выполните указанные ниже действия.

1. Нажмите клавишу `Windows Key`  +  `R` .

2. В диалоговом окне Выполнить введите **Services. msc**.
![Известные проблемы – 1](./media/known_issues_1.PNG)

3. Найдите **стандартную службу сборщика центра диагностики Microsoft (R)** и щелкните ее правой кнопкой мыши.
![Известные проблемы – 2](./media/known_issues_2.PNG)

4. Перезапустите **стандартную службу сборщика центра диагностики Microsoft (R)**.
![Известные проблемы – 3](./media/known_issues_3.PNG)

5. Закройте инструменты разработчика Microsoft EDGE и вкладку. Откройте новую вкладку, перейдите на нужную страницу и нажмите клавишу `F12` .

6. Теперь вы сможете начать профилирование.
![Известные проблемы — 4](./media/known_issues_4-performance.PNG)

Вы по-прежнему столкнулись с проблемами? Пожалуйста, отправьте нам свой отзыв с помощью значка " **Отправить отзыв** "! 

![Известные проблемы – 5](./media/known_issues_5.PNG)
