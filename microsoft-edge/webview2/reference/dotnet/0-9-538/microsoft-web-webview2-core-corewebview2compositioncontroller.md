---
description: Размещение веб-содержимого в приложении Win32 с помощью элемента управления Microsoft Edge WebView2
title: Microsoft Edge WebView2 для приложений Win32
author: MSEdgeTeam
ms.author: msedgedevrel
ms.date: 06/05/2020
ms.topic: reference
ms.prod: microsoft-edge
ms.technology: webview
keywords: IWebView2, IWebView2WebView, webview2, WebView, приложения Win32, Win32, EDGE, ICoreWebView2, ICoreWebView2Controller, элемент управления "веб-браузер", HTML Edge
ms.openlocfilehash: 33adcccc4174a4ebcbabe4a169cd430942ad8a5a
ms.sourcegitcommit: 8dca1c1367853e45a0a975bc89b1818adb117bd4
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 06/08/2020
ms.locfileid: "10699265"
---
# <span data-ttu-id="cdbf6-104">Класс Microsoft. Web. WebView2. Core. CoreWebView2CompositionController</span><span class="sxs-lookup"><span data-stu-id="cdbf6-104">Microsoft.Web.WebView2.Core.CoreWebView2CompositionController class</span></span> 

> [!NOTE]
> <span data-ttu-id="cdbf6-105">Это [экспериментальный API](../../../concepts/versioning.md#experimental-apis) , поставляемый с нашей версией SDK версии [0.9.538-предварительной версии](../../../releasenotes.md#09538).</span><span class="sxs-lookup"><span data-stu-id="cdbf6-105">This is an [experimental API](../../../concepts/versioning.md#experimental-apis) that shipped with our SDK version [0.9.538-prerelease](../../../releasenotes.md#09538).</span></span>

<span data-ttu-id="cdbf6-106">Пространство имен: Microsoft. Web. WebView2. Core </span><span class="sxs-lookup"><span data-stu-id="cdbf6-106">Namespace: Microsoft.Web.WebView2.Core</span></span>\
<span data-ttu-id="cdbf6-107">Сборка: Microsoft. Web. WebView2. Core. dll</span><span class="sxs-lookup"><span data-stu-id="cdbf6-107">Assembly: Microsoft.Web.WebView2.Core.dll</span></span>

<span data-ttu-id="cdbf6-108">Этот класс является расширением класса CoreWebView2Controller для поддержки визуального размещения.</span><span class="sxs-lookup"><span data-stu-id="cdbf6-108">This class is an extension of the CoreWebView2Controller class to support visual hosting.</span></span>

## <span data-ttu-id="cdbf6-109">Краткий обзор</span><span class="sxs-lookup"><span data-stu-id="cdbf6-109">Summary</span></span>

 <span data-ttu-id="cdbf6-110">Участников</span><span class="sxs-lookup"><span data-stu-id="cdbf6-110">Members</span></span>                        | <span data-ttu-id="cdbf6-111">Описания</span><span class="sxs-lookup"><span data-stu-id="cdbf6-111">Descriptions</span></span>
--------------------------------|---------------------------------------------
[<span data-ttu-id="cdbf6-112">Cursor (Курсор)</span><span class="sxs-lookup"><span data-stu-id="cdbf6-112">Cursor</span></span>](#cursor) | <span data-ttu-id="cdbf6-113">Текущий курсор, WebView рассчитает, что он должен быть.</span><span class="sxs-lookup"><span data-stu-id="cdbf6-113">The current cursor that WebView thinks it should be.</span></span>
[<span data-ttu-id="cdbf6-114">CursorChanged</span><span class="sxs-lookup"><span data-stu-id="cdbf6-114">CursorChanged</span></span>](#cursorchanged) | <span data-ttu-id="cdbf6-115">Событие срабатывает, когда WebView считает, что курсор должен быть изменен.</span><span class="sxs-lookup"><span data-stu-id="cdbf6-115">The event fires when WebView thinks the cursor should be changed.</span></span>
[<span data-ttu-id="cdbf6-116">RootVisualTarget</span><span class="sxs-lookup"><span data-stu-id="cdbf6-116">RootVisualTarget</span></span>](#rootvisualtarget) | <span data-ttu-id="cdbf6-117">RootVisualTarget — это визуальный элемент в визуальном дереве размещающего приложения.</span><span class="sxs-lookup"><span data-stu-id="cdbf6-117">The RootVisualTarget is a visual in the hosting app's visual tree.</span></span>
[<span data-ttu-id="cdbf6-118">UIAProvider</span><span class="sxs-lookup"><span data-stu-id="cdbf6-118">UIAProvider</span></span>](#uiaprovider) | <span data-ttu-id="cdbf6-119">Возвращает поставщик модели автоматизации пользовательского интерфейса для WebView.</span><span class="sxs-lookup"><span data-stu-id="cdbf6-119">Returns the UI Automation Provider for the WebView.</span></span>
[<span data-ttu-id="cdbf6-120">CreateCoreWebView2PointerInfoFromPointerId</span><span class="sxs-lookup"><span data-stu-id="cdbf6-120">CreateCoreWebView2PointerInfoFromPointerId</span></span>](#createcorewebview2pointerinfofrompointerid) | <span data-ttu-id="cdbf6-121">Вспомогательная функция для преобразования pointerId, полученного из системы, в CoreWebView2ExperimentalPointerInfo.</span><span class="sxs-lookup"><span data-stu-id="cdbf6-121">A helper function to convert a pointerId received from the system into a CoreWebView2ExperimentalPointerInfo.</span></span>
[<span data-ttu-id="cdbf6-122">SendMouseInput</span><span class="sxs-lookup"><span data-stu-id="cdbf6-122">SendMouseInput</span></span>](#sendmouseinput) | <span data-ttu-id="cdbf6-123">Если eventKind — CoreWebView2MouseEventKind. HorizontalWheel или CoreWebView2MouseEventKind. Wheel, то mouseData задает величину движения колесика.</span><span class="sxs-lookup"><span data-stu-id="cdbf6-123">If eventKind is CoreWebView2MouseEventKind.HorizontalWheel or CoreWebView2MouseEventKind.Wheel, then mouseData specifies the amount of wheel movement.</span></span>
[<span data-ttu-id="cdbf6-124">SendPointerInput</span><span class="sxs-lookup"><span data-stu-id="cdbf6-124">SendPointerInput</span></span>](#sendpointerinput) | <span data-ttu-id="cdbf6-125">SendPointerInput принимает вводные данные и указатель пера для типов, определенных в CoreWebView2PointerEventKind.</span><span class="sxs-lookup"><span data-stu-id="cdbf6-125">SendPointerInput accepts touch or pen pointer input of types defined in CoreWebView2PointerEventKind.</span></span>

## <span data-ttu-id="cdbf6-126">Участников</span><span class="sxs-lookup"><span data-stu-id="cdbf6-126">Members</span></span>

#### <span data-ttu-id="cdbf6-127">Cursor (Курсор)</span><span class="sxs-lookup"><span data-stu-id="cdbf6-127">Cursor</span></span> 

<span data-ttu-id="cdbf6-128">Текущий курсор, WebView рассчитает, что он должен быть.</span><span class="sxs-lookup"><span data-stu-id="cdbf6-128">The current cursor that WebView thinks it should be.</span></span>

> <span data-ttu-id="cdbf6-129">Открытый [курсор](#cursor) IntPtr</span><span class="sxs-lookup"><span data-stu-id="cdbf6-129">public IntPtr [Cursor](#cursor)</span></span>

<span data-ttu-id="cdbf6-130">Курсор должен быть установлен в WM_SETCURSOR с помощью мыши. SetCursor или установлен на соответствующем родительском элементе/предок WebView через SetClassLongPtr.</span><span class="sxs-lookup"><span data-stu-id="cdbf6-130">The cursor should be set in WM_SETCURSOR through Mouse.SetCursor or set on the corresponding parent/ancestor HWND of the WebView through SetClassLongPtr.</span></span> <span data-ttu-id="cdbf6-131">HCURSOR можно освободить таким образом, чтобы CopyCursor и DestroyCursor, чтобы сохранить собственную копию, если вы еще не настраиваете курсор.</span><span class="sxs-lookup"><span data-stu-id="cdbf6-131">The HCURSOR can be freed so CopyCursor/DestroyCursor is recommended to keep your own copy if you are doing more than immediately setting the cursor.</span></span>

#### <span data-ttu-id="cdbf6-132">CursorChanged</span><span class="sxs-lookup"><span data-stu-id="cdbf6-132">CursorChanged</span></span> 

<span data-ttu-id="cdbf6-133">Событие срабатывает, когда WebView считает, что курсор должен быть изменен.</span><span class="sxs-lookup"><span data-stu-id="cdbf6-133">The event fires when WebView thinks the cursor should be changed.</span></span>

> <span data-ttu-id="cdbf6-134">событие EventHandler< объект > [CursorChanged](#cursorchanged)</span><span class="sxs-lookup"><span data-stu-id="cdbf6-134">public event EventHandler< object > [CursorChanged](#cursorchanged)</span></span>

<span data-ttu-id="cdbf6-135">Например, если курсор мыши установлен по умолчанию, но затем перемещается поверх текста, он может попытаться перейти на курсор IBeam.</span><span class="sxs-lookup"><span data-stu-id="cdbf6-135">For example, when the mouse cursor is currently the default cursor but is then moved over text, it may try to change to the IBeam cursor.</span></span>

#### <span data-ttu-id="cdbf6-136">RootVisualTarget</span><span class="sxs-lookup"><span data-stu-id="cdbf6-136">RootVisualTarget</span></span> 

<span data-ttu-id="cdbf6-137">RootVisualTarget — это визуальный элемент в визуальном дереве размещающего приложения.</span><span class="sxs-lookup"><span data-stu-id="cdbf6-137">The RootVisualTarget is a visual in the hosting app's visual tree.</span></span>

> <span data-ttu-id="cdbf6-138">общедоступный объект [RootVisualTarget](#rootvisualtarget)</span><span class="sxs-lookup"><span data-stu-id="cdbf6-138">public object [RootVisualTarget](#rootvisualtarget)</span></span>

<span data-ttu-id="cdbf6-139">Этот визуальный элемент — это то, где WebView будет подключаться к визуальному дереву.</span><span class="sxs-lookup"><span data-stu-id="cdbf6-139">This visual is where the WebView will connect its visual tree.</span></span> <span data-ttu-id="cdbf6-140">Приложение использует этот визуальный элемент, чтобы расположить WebView в приложении.</span><span class="sxs-lookup"><span data-stu-id="cdbf6-140">The app uses this visual to position the WebView within the app.</span></span> <span data-ttu-id="cdbf6-141">Чтобы изменить размер WebView, приложению по-прежнему нужно использовать свойство Boundss.</span><span class="sxs-lookup"><span data-stu-id="cdbf6-141">The app still needs to use the Bounds property to size the WebView.</span></span> <span data-ttu-id="cdbf6-142">Свойством RootVisualTarget может быть IDCompositionVisual или Windows:: UI:: композиция:: ContainerVisual.</span><span class="sxs-lookup"><span data-stu-id="cdbf6-142">The RootVisualTarget property can be an IDCompositionVisual or a Windows::UI::Composition::ContainerVisual.</span></span> <span data-ttu-id="cdbf6-143">WebView подключится к визуальному дереву для предоставленного визуального элемента перед возвратом из метода присваивания свойств.</span><span class="sxs-lookup"><span data-stu-id="cdbf6-143">WebView will connect its visual tree to the provided visual before returning from the property setter.</span></span> <span data-ttu-id="cdbf6-144">Приложение должно быть зафиксировано на своем устройстве, в котором задано свойство RootVisualTarget.</span><span class="sxs-lookup"><span data-stu-id="cdbf6-144">The app needs to commit on its device setting the RootVisualTarget property.</span></span> <span data-ttu-id="cdbf6-145">Свойство RootVisualTarget поддерживает значение nullptr, чтобы отключить WebView от визуального дерева приложения.</span><span class="sxs-lookup"><span data-stu-id="cdbf6-145">The RootVisualTarget property supports being set to nullptr to disconnect the WebView from the app's visual tree.</span></span>

#### <span data-ttu-id="cdbf6-146">UIAProvider</span><span class="sxs-lookup"><span data-stu-id="cdbf6-146">UIAProvider</span></span> 

<span data-ttu-id="cdbf6-147">Возвращает поставщик модели автоматизации пользовательского интерфейса для WebView.</span><span class="sxs-lookup"><span data-stu-id="cdbf6-147">Returns the UI Automation Provider for the WebView.</span></span>

> <span data-ttu-id="cdbf6-148">общедоступный объект [UIAProvider](#uiaprovider)</span><span class="sxs-lookup"><span data-stu-id="cdbf6-148">public object [UIAProvider](#uiaprovider)</span></span>

#### <span data-ttu-id="cdbf6-149">CreateCoreWebView2PointerInfoFromPointerId</span><span class="sxs-lookup"><span data-stu-id="cdbf6-149">CreateCoreWebView2PointerInfoFromPointerId</span></span> 

<span data-ttu-id="cdbf6-150">Вспомогательная функция для преобразования pointerId, полученного из системы, в CoreWebView2ExperimentalPointerInfo.</span><span class="sxs-lookup"><span data-stu-id="cdbf6-150">A helper function to convert a pointerId received from the system into a CoreWebView2ExperimentalPointerInfo.</span></span>

> <span data-ttu-id="cdbf6-151">общедоступные [CoreWebView2PointerInfo](microsoft-web-webview2-core-corewebview2pointerinfo.md) [CreateCoreWebView2PointerInfoFromPointerId](#createcorewebview2pointerinfofrompointerid)(uint pointerId, IntPtr ParentWindow, Matrix4x4 Transform)</span><span class="sxs-lookup"><span data-stu-id="cdbf6-151">public [CoreWebView2PointerInfo](microsoft-web-webview2-core-corewebview2pointerinfo.md) [CreateCoreWebView2PointerInfoFromPointerId](#createcorewebview2pointerinfofrompointerid)(uint PointerId, IntPtr ParentWindow, Matrix4x4 transform)</span></span>

<span data-ttu-id="cdbf6-152">parentWindow — HWND, который содержит WebView.</span><span class="sxs-lookup"><span data-stu-id="cdbf6-152">parentWindow is the HWND that contains the webview.</span></span> <span data-ttu-id="cdbf6-153">Это может быть любой HWND в дереве HWND, который включает WebView.</span><span class="sxs-lookup"><span data-stu-id="cdbf6-153">This can be any HWND in the hwnd tree that contains the webview.</span></span> <span data-ttu-id="cdbf6-154">CoreWebView2Matrix4x4 является преобразованием из HWND в WebView.</span><span class="sxs-lookup"><span data-stu-id="cdbf6-154">The CoreWebView2Matrix4x4 is the transform from that HWND to the webview.</span></span> <span data-ttu-id="cdbf6-155">Возвращенный CoreWebView2ExperimentalPointerInfo используется в SendPointerInfo.</span><span class="sxs-lookup"><span data-stu-id="cdbf6-155">The returned CoreWebView2ExperimentalPointerInfo is used in SendPointerInfo.</span></span> <span data-ttu-id="cdbf6-156">Тип указателя должен быть либо пером, либо сенсорным, либо функция завершится сбоем.</span><span class="sxs-lookup"><span data-stu-id="cdbf6-156">The pointer type must be either pen or touch or the function will fail.</span></span>

#### <span data-ttu-id="cdbf6-157">SendMouseInput</span><span class="sxs-lookup"><span data-stu-id="cdbf6-157">SendMouseInput</span></span> 

<span data-ttu-id="cdbf6-158">Если eventKind — CoreWebView2MouseEventKind. HorizontalWheel или CoreWebView2MouseEventKind. Wheel, то mouseData задает величину движения колесика.</span><span class="sxs-lookup"><span data-stu-id="cdbf6-158">If eventKind is CoreWebView2MouseEventKind.HorizontalWheel or CoreWebView2MouseEventKind.Wheel, then mouseData specifies the amount of wheel movement.</span></span>

> <span data-ttu-id="cdbf6-159">Public void [SendMouseInput](#sendmouseinput)([CoreWebView2MouseEventKind](./namespace-microsoft-web-webview2-core.md) eventKind, [CoreWebView2MouseEventVirtualKeys](./namespace-microsoft-web-webview2-core.md) virtualKeys, uint mouseData, Point Point)</span><span class="sxs-lookup"><span data-stu-id="cdbf6-159">public void [SendMouseInput](#sendmouseinput)([CoreWebView2MouseEventKind](./namespace-microsoft-web-webview2-core.md) eventKind, [CoreWebView2MouseEventVirtualKeys](./namespace-microsoft-web-webview2-core.md) virtualKeys, uint mouseData, Point point)</span></span>

<span data-ttu-id="cdbf6-160">Положительное значение указывает на то, что колесико было повернуто вперед от пользователя; отрицательное значение указывает на то, что колесико было повернуто на обратном направлении к пользователю.</span><span class="sxs-lookup"><span data-stu-id="cdbf6-160">A positive value indicates that the wheel was rotated forward, away from the user; a negative value indicates that the wheel was rotated backward, toward the user.</span></span> <span data-ttu-id="cdbf6-161">Один щелчок мыши определяется как WHEEL_DELTA (120).</span><span class="sxs-lookup"><span data-stu-id="cdbf6-161">One wheel click is defined as WHEEL_DELTA, which is 120.</span></span> <span data-ttu-id="cdbf6-162">Если eventKind — CoreWebView2MouseEventKind. XButtonDoubleClick CoreWebView2MouseEventKind. XButtonDown или CoreWebView2MouseEventKind. XButtonUp, mouseData указывает, какие кнопки X были нажаты или отпущены.</span><span class="sxs-lookup"><span data-stu-id="cdbf6-162">If eventKind is CoreWebView2MouseEventKind.XButtonDoubleClick CoreWebView2MouseEventKind.XButtonDown, or CoreWebView2MouseEventKind.XButtonUp, then mouseData specifies which X buttons were pressed or released.</span></span> <span data-ttu-id="cdbf6-163">Это значение должно быть 1, если первая кнопка X нажата/выпущена, и 2 при нажатии или отпускании второй кнопки X.</span><span class="sxs-lookup"><span data-stu-id="cdbf6-163">This value should be 1 if the first X button is pressed/released and 2 if the second X button is pressed/released.</span></span> <span data-ttu-id="cdbf6-164">Если eventKind — CoreWebView2MouseEventKind. Leave, virtualKeys, mouseData и Point должны равняться нулю.</span><span class="sxs-lookup"><span data-stu-id="cdbf6-164">If eventKind is CoreWebView2MouseEventKind.Leave, then virtualKeys, mouseData, and point should all be zero.</span></span> <span data-ttu-id="cdbf6-165">Если eventKind — любое другое значение, mouseData должно равняться нулю.</span><span class="sxs-lookup"><span data-stu-id="cdbf6-165">If eventKind is any other value, then mouseData should be zero.</span></span> <span data-ttu-id="cdbf6-166">Ожидается, что точка должна находиться в пространстве координат клиента WebView.</span><span class="sxs-lookup"><span data-stu-id="cdbf6-166">Point is expected to be in the client coordinate space of the WebView.</span></span> <span data-ttu-id="cdbf6-167">Для отслеживания событий мыши, которые запускаются в WebView и потенциально могут перемещаться за пределы WebView и ведущего приложения, рекомендуется использовать вызов SetCapture и ReleaseCapture.</span><span class="sxs-lookup"><span data-stu-id="cdbf6-167">To track mouse events that start in the WebView and can potentially move outside of the WebView and host application, calling SetCapture and ReleaseCapture is recommended.</span></span> <span data-ttu-id="cdbf6-168">Чтобы выйти из всплывающих окон, также рекомендуется отправлять WM_MOUSELEAVE сообщения.</span><span class="sxs-lookup"><span data-stu-id="cdbf6-168">To dismiss hover popups, it is also recommended to send WM_MOUSELEAVE messages.</span></span>

#### <span data-ttu-id="cdbf6-169">SendPointerInput</span><span class="sxs-lookup"><span data-stu-id="cdbf6-169">SendPointerInput</span></span> 

<span data-ttu-id="cdbf6-170">SendPointerInput принимает вводные данные и указатель пера для типов, определенных в CoreWebView2PointerEventKind.</span><span class="sxs-lookup"><span data-stu-id="cdbf6-170">SendPointerInput accepts touch or pen pointer input of types defined in CoreWebView2PointerEventKind.</span></span>

> <span data-ttu-id="cdbf6-171">Public void [SendPointerInput](#sendpointerinput)([CoreWebView2PointerEventKind](./namespace-microsoft-web-webview2-core.md) EventType, [CoreWebView2PointerInfo](microsoft-web-webview2-core-corewebview2pointerinfo.md) pointerInfo)</span><span class="sxs-lookup"><span data-stu-id="cdbf6-171">public void [SendPointerInput](#sendpointerinput)([CoreWebView2PointerEventKind](./namespace-microsoft-web-webview2-core.md) eventType, [CoreWebView2PointerInfo](microsoft-web-webview2-core-corewebview2pointerinfo.md) pointerInfo)</span></span>

<span data-ttu-id="cdbf6-172">Все входные данные указателя из системы должны быть преобразованы в CoreWebView2ExperimentalPointerInfo первыми.</span><span class="sxs-lookup"><span data-stu-id="cdbf6-172">Any pointer input from the system must be converted into a CoreWebView2ExperimentalPointerInfo first.</span></span>

