---
description: Варианты распространения при выпуске приложения с помощью Microsoft Edge WebView2
title: Распространение приложений Microsoft Edge WebView2
author: MSEdgeTeam
ms.author: msedgedevrel
ms.date: 09/21/2020
ms.topic: conceptual
ms.prod: microsoft-edge
ms.technology: webview
keywords: IWebView2, IWebView2WebView, webview2, WebView, приложения WPF, WPF, EDGE, ICoreWebView2, ICoreWebView2Host, элемент управления "браузер", HTML Edge
ms.openlocfilehash: 7db610ff1133b1b5b380372422f1f2f10981e583
ms.sourcegitcommit: 24151cc65bad92d751a8e7a868c102e1121456e3
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 09/22/2020
ms.locfileid: "11052188"
---
# <span data-ttu-id="6659d-104">Распространение приложений с помощью WebView2</span><span class="sxs-lookup"><span data-stu-id="6659d-104">Distribution of applications using WebView2</span></span>  

<span data-ttu-id="6659d-105">При распространении приложения WebView2 перед запуском приложения убедитесь, что веб-платформа, поддерживающая WebView2, присутствует в [среде выполнения](#understanding-the-webview2-runtime) .</span><span class="sxs-lookup"><span data-stu-id="6659d-105">When distributing your WebView2 application, make sure the backing web platform - the [WebView2 Runtime](#understanding-the-webview2-runtime) is present before the app starts.</span></span>  <span data-ttu-id="6659d-106">В этой статье описано, как разработчики могут установить среду выполнения WebView2 и использовать два режима распространения для вашего приложения WebView2:  [Evergreen](#evergreen-distribution-mode) и [fixed Version](#fixed-version-distribution-mode).</span><span class="sxs-lookup"><span data-stu-id="6659d-106">This article describes how developers can install the WebView2 Runtime, and use the two distribution modes for your WebView2 application:  [Evergreen](#evergreen-distribution-mode) and [Fixed Version](#fixed-version-distribution-mode).</span></span>  

## <span data-ttu-id="6659d-107">Режим распространения Evergreen</span><span class="sxs-lookup"><span data-stu-id="6659d-107">Evergreen distribution mode</span></span>  

> [!NOTE]
> <span data-ttu-id="6659d-108">Для большинства разработчиков рекомендуется использовать режим распространения Evergreen.</span><span class="sxs-lookup"><span data-stu-id="6659d-108">The Evergreen distribution mode is recommended for most developers.</span></span>  

<span data-ttu-id="6659d-109">Режим распространения Evergreen гарантирует, что ваше приложение использует последние возможности и обновления для системы безопасности.</span><span class="sxs-lookup"><span data-stu-id="6659d-109">The Evergreen distribution mode ensures that your app is taking advantage of the latest features and security updates.</span></span>  <span data-ttu-id="6659d-110">Она обладает следующими характеристиками.</span><span class="sxs-lookup"><span data-stu-id="6659d-110">It has the following characteristics.</span></span>  

*   <span data-ttu-id="6659d-111">Базовая веб-платформа \ (WebView2 (среда выполнения)) обновляется автоматически без дополнительных усилий, предоставленных разработчиками.</span><span class="sxs-lookup"><span data-stu-id="6659d-111">The underlying web platform \(WebView2 Runtime\) updates automatically without additional effort from developers.</span></span>  
*   <span data-ttu-id="6659d-112">Во всех приложениях, использующих режим распространения Evergreen, используется общая копия среды выполнения Evergreen WebView2, что экономит место на диске.</span><span class="sxs-lookup"><span data-stu-id="6659d-112">All applications that use the Evergreen distribution mode use a shared copy of the Evergreen WebView2 Runtime, which saves disk space.</span></span>  

### <span data-ttu-id="6659d-113">Общие сведения о среде выполнения WebView2</span><span class="sxs-lookup"><span data-stu-id="6659d-113">Understanding the WebView2 Runtime</span></span>  

<span data-ttu-id="6659d-114">Среда выполнения WebView2 является повторно распространяемой средой выполнения и используется в качестве резервной веб-платформы для приложений WebView2.</span><span class="sxs-lookup"><span data-stu-id="6659d-114">WebView2 Runtime is a re-distributable runtime and serves as the backing web platform for WebView2 applications.</span></span>  <span data-ttu-id="6659d-115">Эта концепция похожа на среду выполнения VC + + или .NET для приложений/.NET на C++.</span><span class="sxs-lookup"><span data-stu-id="6659d-115">This concept is similar to VC++ or .NET Runtime for C++/.NET apps.</span></span>  <span data-ttu-id="6659d-116">В изнутри среда выполнения изменяет двоичные файлы Microsoft Edge \ (Chromium \), которые настроены и протестированы для приложений.</span><span class="sxs-lookup"><span data-stu-id="6659d-116">Under the hood, the Runtime is modified Microsoft Edge \(Chromium\) binaries that are fine-tuned and tested for applications.</span></span>  <span data-ttu-id="6659d-117">При установке среда выполнения не отображается в браузере, который является видимым пользователем, например, у пользователей не будет ярлык браузера на рабочем столе или в меню "Пуск".</span><span class="sxs-lookup"><span data-stu-id="6659d-117">The Runtime won't appear as a user-visible browser upon installation, for example, users won't have a browser desktop shortcut or start menu entry.</span></span>  

<span data-ttu-id="6659d-118">Для разработки и тестирования разработчики могут использовать среду выполнения или любой нестабильный канал браузера Microsoft Edge \ (Chromium \) для резервной веб-платформы.</span><span class="sxs-lookup"><span data-stu-id="6659d-118">For development and testing, developers may use the Runtime or any non-stable Microsoft Edge \(Chromium\) browser channel for the backing web platform.</span></span>  <span data-ttu-id="6659d-119">В рабочих средах разработчикам необходимо обеспечить присутствие среды выполнения на устройствах пользователя перед запуском приложения.</span><span class="sxs-lookup"><span data-stu-id="6659d-119">In production environments, developers must ensure the Runtime is present on user devices before the application starts.</span></span>  <span data-ttu-id="6659d-120">Стабильный канал Microsoft Edge недоступен для использования WebView2, чтобы предотвратить получение приложениями зависимости от браузера в производстве.</span><span class="sxs-lookup"><span data-stu-id="6659d-120">The Microsoft Edge Stable channel is unavailable for WebView2 usage to prevent apps from taking a dependency on the browser in production.</span></span>  

<span data-ttu-id="6659d-121">Разработчикам не следует использовать зависимость от браузера по следующим причинам:</span><span class="sxs-lookup"><span data-stu-id="6659d-121">Developers must not take a dependency on the browser because:</span></span>  

*   <span data-ttu-id="6659d-122">Microsoft Edge \ (Chromium \) не гарантируется на всех устройствах пользователей.</span><span class="sxs-lookup"><span data-stu-id="6659d-122">Microsoft Edge \(Chromium\) isn't guaranteed to be present on all user devices.</span></span>  <span data-ttu-id="6659d-123">Например, устройства, отключенные от центра обновления Windows или неуправляемые корпорацией Майкрософт, могут не иметь браузера.</span><span class="sxs-lookup"><span data-stu-id="6659d-123">For example, devices disconnected from Windows Update or not managed by Microsoft directly \(a large portion of the Enterprise/EDU market\) may not have the browser.</span></span>  <span data-ttu-id="6659d-124">Предоставление разработчикам возможности распространения среды выполнения WebView2 не позволяет использовать зависимость в браузере в качестве предварительных требований для приложений.</span><span class="sxs-lookup"><span data-stu-id="6659d-124">Allowing developers to distribute the WebView2 Runtime avoids taking a dependency on the browser as a pre-requisite for apps.</span></span>
*   <span data-ttu-id="6659d-125">В браузерах и приложениях используются различные варианты использования, поэтому использование зависимостей в браузере может привести к нежелательным побочным эффектам для приложений.</span><span class="sxs-lookup"><span data-stu-id="6659d-125">Browsers and apps have different use cases, and so taking a dependency on a browser may have unintended side-effects on your apps.</span></span>  <span data-ttu-id="6659d-126">Например, ИТ-администраторы могут управлять версиями в браузере для обеспечения совместимости внутренних веб-сайтов.</span><span class="sxs-lookup"><span data-stu-id="6659d-126">For example, IT admins may version-control the browser for internal website compatibility.</span></span>  <span data-ttu-id="6659d-127">Среда выполнения WebView2 позволяет приложениям оставаться Evergreen, пока обновления браузера активно управляются.</span><span class="sxs-lookup"><span data-stu-id="6659d-127">WebView2 Runtime allows apps to stay evergreen while browser updates are being actively managed.</span></span>  
*   <span data-ttu-id="6659d-128">В отличие от браузера, среда выполнения разрабатывается и тестируется для сценариев приложений и в некоторых случаях может включать исправления ошибок, которые еще не доступны в браузере.</span><span class="sxs-lookup"><span data-stu-id="6659d-128">As opposed to the browser, the Runtime is developed and tested for application scenarios and in some cases may include bug fixes not yet available in the browser.</span></span>  

<span data-ttu-id="6659d-129">Среда выполнения Evergreen WebView2 планирует отгрузку почты в следующих выпусках Windows.</span><span class="sxs-lookup"><span data-stu-id="6659d-129">The Evergreen WebView2 Runtime is planned to ship inbox in future releases of Windows.</span></span>  <span data-ttu-id="6659d-130">Перед тем как среда выполнения станет более универсальной, разработчики рекомендуются для развертывания среды выполнения вместе с приложением.</span><span class="sxs-lookup"><span data-stu-id="6659d-130">Before the Runtime becomes more universally available, developers are recommended to deploy the Runtime along with their production application.</span></span>  

### <span data-ttu-id="6659d-131">Развертывание среды выполнения Evergreen WebView2</span><span class="sxs-lookup"><span data-stu-id="6659d-131">Deploying the Evergreen WebView2 Runtime</span></span>  

<span data-ttu-id="6659d-132">Для всех Evergreen приложений на устройстве требуется только одна установка среды выполнения Evergreen WebView2.</span><span class="sxs-lookup"><span data-stu-id="6659d-132">Only one installation of the Evergreen WebView2 Runtime is needed for all Evergreen apps on the device.</span></span>  <span data-ttu-id="6659d-133">На [странице загрузки среды выполнения WebView2][Webview2Installer] есть ряд инструментов, которые помогают разработчикам развертывать среду выполнения Evergreen, например:</span><span class="sxs-lookup"><span data-stu-id="6659d-133">There are a number of tools available on the [WebView2 Runtime download page][Webview2Installer] to help developers deploy the Evergreen Runtime, such as:</span></span>  

*   <span data-ttu-id="6659d-134">Загрузчик среды выполнения WebView2 \ (для немедленного освобождения) — это крошечный установщик \ (примерно 2 МБ \).</span><span class="sxs-lookup"><span data-stu-id="6659d-134">WebView2 Runtime Bootstrapper \(to be released soon\) is a tiny \(approximately 2 MB\) installer.</span></span>  <span data-ttu-id="6659d-135">Этот установщик загружает и устанавливает среду выполнения Evergreen на серверах Майкрософт, которые соответствуют архитектуре устройства пользователя.</span><span class="sxs-lookup"><span data-stu-id="6659d-135">This installer downloads and installs the Evergreen Runtime from Microsoft servers that matches the user's device architecture.</span></span>  
*   <span data-ttu-id="6659d-136">Ссылка для загрузки загрузчика \ (для немедленного освобождения \) — это ссылка, с помощью которой разработчики могут программно загрузить загрузчик.</span><span class="sxs-lookup"><span data-stu-id="6659d-136">Link to download the Bootstrapper \(to be released soon\) is a link for developers to programmatically download the bootstrapper.</span></span>
*   <span data-ttu-id="6659d-137">Автономный установщик среды выполнения WebView2 — это полный установщик, который может установить среду выполнения Evergreen WebView2 в автономных средах.</span><span class="sxs-lookup"><span data-stu-id="6659d-137">WebView2 Runtime Standalone Installer is a full installer that can install the Evergreen WebView2 Runtime in offline environments.</span></span>  

<span data-ttu-id="6659d-138">В настоящее время загрузчик и автономный установщик поддерживают только установку для компьютера, для которого требуется повышение прав.</span><span class="sxs-lookup"><span data-stu-id="6659d-138">Currently, both the bootstrapper and standalone installer only support per-machine install, which requires elevation.</span></span>  <span data-ttu-id="6659d-139">При запуске без повышения прав появляется запрос на контроль учетной записи пользователя Windows, с помощью которого пользователи запрашивают разрешения на повышение прав.</span><span class="sxs-lookup"><span data-stu-id="6659d-139">When run without elevation, a Windows User Account Control prompt appears to ask users to elevate permissions.</span></span>  

<span data-ttu-id="6659d-140">Мы рекомендуем использовать указанные ниже рабочие процессы, чтобы убедиться, что среда выполнения уже установлена перед запуском приложения.</span><span class="sxs-lookup"><span data-stu-id="6659d-140">We recommend the following workflows to ensure the Runtime is already installed before your application launches.</span></span>  <span data-ttu-id="6659d-141">Вы можете настроить рабочий процесс в зависимости от вашего сценария.</span><span class="sxs-lookup"><span data-stu-id="6659d-141">You may adjust your workflow depending on your scenario.</span></span>  <span data-ttu-id="6659d-142">Кроме того, мы добавим пример кода в будущем.</span><span class="sxs-lookup"><span data-stu-id="6659d-142">We'll also provide sample code in the future.</span></span>  

#### <span data-ttu-id="6659d-143">Развертывание только в сети</span><span class="sxs-lookup"><span data-stu-id="6659d-143">Online-only deployment</span></span>  

<span data-ttu-id="6659d-144">Если у вас есть сценарий для развертывания только в Интернете, для конечных пользователей требуется доступ к Интернету, выполните указанные ниже действия.</span><span class="sxs-lookup"><span data-stu-id="6659d-144">If you have an online-only deployment scenario where end users are assumed to have internet access, perform the following steps:</span></span>  

*   <span data-ttu-id="6659d-145">В процессе настройки приложения убедитесь, что среда выполнения уже установлена.</span><span class="sxs-lookup"><span data-stu-id="6659d-145">During your application setup, check if the Runtime is already installed by either:</span></span>  
    *   <span data-ttu-id="6659d-146">Проверка наличия RegKey `pv (REG_SZ)` в разделе `HKEY_LOCAL_MACHINE\SOFTWARE\WOW6432Node\Microsoft\EdgeUpdate\ClientState\{F3017226-FE2A-4295-8BDF-00C3A9A7E4C5}` или</span><span class="sxs-lookup"><span data-stu-id="6659d-146">Inspecting if regkey `pv (REG_SZ)` exists under `HKEY_LOCAL_MACHINE\SOFTWARE\WOW6432Node\Microsoft\EdgeUpdate\ClientState\{F3017226-FE2A-4295-8BDF-00C3A9A7E4C5}`, or</span></span>  
    *   <span data-ttu-id="6659d-147">Вызов API WebView2 [GetAvailableCoreWebView2BrowserVersionString](../reference/win32/0-9-622/webview2-idl.md#getavailablecorewebview2browserversionstring) и проверка того, имеет ли versionInfo значение null.</span><span class="sxs-lookup"><span data-stu-id="6659d-147">Calling WebView2 API [GetAvailableCoreWebView2BrowserVersionString](../reference/win32/0-9-622/webview2-idl.md#getavailablecorewebview2browserversionstring) and check whether the versionInfo is NULL.</span></span>  
*   <span data-ttu-id="6659d-148">Если среда выполнения не установлена, воспользуйтесь ссылкой, чтобы программно загрузить загрузчик.</span><span class="sxs-lookup"><span data-stu-id="6659d-148">If the Runtime isn't installed, use the link to programmatically download the bootstrapper.</span></span>  
*   <span data-ttu-id="6659d-149">Вызовите загрузчик из процесса с повышенными привилегиями или командной строки `MicrosoftEdgeWebview2Setup.exe /silent /install` для автоматической установки.</span><span class="sxs-lookup"><span data-stu-id="6659d-149">Invoke the bootstrapper from an elevated process or command prompt with `MicrosoftEdgeWebview2Setup.exe /silent /install` for silent install.</span></span>  

<span data-ttu-id="6659d-150">Этот рабочий процесс гарантирует установку среды выполнения только в том случае, если это необходимо, вы не обязаны упаковывать установщики и определять архитектуру пользователей, а также устанавливать среду выполнения без предупреждения.</span><span class="sxs-lookup"><span data-stu-id="6659d-150">This workflow ensures you install the Runtime only when it's needed, you're not required to package installers or detect the architecture of user devices, and can install the Runtime silently.</span></span>  <span data-ttu-id="6659d-151">Вы также можете выбрать упаковку загрузчика с помощью приложения вместо программной загрузки по запросу.</span><span class="sxs-lookup"><span data-stu-id="6659d-151">You may also choose to package the bootstrapper with your application instead of programmatically downloading it on demand.</span></span>  

#### <span data-ttu-id="6659d-152">Развертывание в автономном режиме</span><span class="sxs-lookup"><span data-stu-id="6659d-152">Offline deployment</span></span>  

<span data-ttu-id="6659d-153">Если вы работаете в автономном режиме, когда развертывание приложения будет работать в автономном режиме, выполните указанные ниже действия.</span><span class="sxs-lookup"><span data-stu-id="6659d-153">If you have an offline deployment scenario where app deployment has to work entirely offline, perform the following steps:</span></span>  

*   <span data-ttu-id="6659d-154">Скачайте [автономный установщик][Webview2Installer].</span><span class="sxs-lookup"><span data-stu-id="6659d-154">Download the [standalone installer][Webview2Installer].</span></span>  
*   <span data-ttu-id="6659d-155">Включите установщик в установщик приложения или в средство обновления.</span><span class="sxs-lookup"><span data-stu-id="6659d-155">Include the installer in your application installer or updater.</span></span>  
*   <span data-ttu-id="6659d-156">В процессе настройки приложения убедитесь, что среда выполнения уже установлена.</span><span class="sxs-lookup"><span data-stu-id="6659d-156">During your application setup, check if the Runtime is already installed by either:</span></span>  
    *   <span data-ttu-id="6659d-157">Проверка наличия RegKey `pv (REG_SZ)` в разделе `HKEY_LOCAL_MACHINE\SOFTWARE\WOW6432Node\Microsoft\EdgeUpdate\ClientState\{F3017226-FE2A-4295-8BDF-00C3A9A7E4C5}` или</span><span class="sxs-lookup"><span data-stu-id="6659d-157">Inspecting if regkey `pv (REG_SZ)` exists under `HKEY_LOCAL_MACHINE\SOFTWARE\WOW6432Node\Microsoft\EdgeUpdate\ClientState\{F3017226-FE2A-4295-8BDF-00C3A9A7E4C5}`, or</span></span>  
    *   <span data-ttu-id="6659d-158">Вызов API WebView2 [GetAvailableCoreWebView2BrowserVersionString](../reference/win32/0-9-622/webview2-idl.md#getavailablecorewebview2browserversionstring) и проверка того, имеет ли versionInfo значение null.</span><span class="sxs-lookup"><span data-stu-id="6659d-158">Calling WebView2 API [GetAvailableCoreWebView2BrowserVersionString](../reference/win32/0-9-622/webview2-idl.md#getavailablecorewebview2browserversionstring) and check whether the versionInfo is NULL.</span></span>  
*   <span data-ttu-id="6659d-159">Если среда выполнения не установлена, вызовите автономный установщик из процесса с повышенными привилегиями или командной строки `MicrosoftEdgeWebView2RuntimeInstaller{X64/X86/ARM64}.exe /silent /install` для автоматической установки.</span><span class="sxs-lookup"><span data-stu-id="6659d-159">If the Runtime isn't installed, invoke the standalone installer from an elevated process or command prompt with `MicrosoftEdgeWebView2RuntimeInstaller{X64/X86/ARM64}.exe /silent /install` for silent install.</span></span>  

## <span data-ttu-id="6659d-160">Режим распространения фиксированной версии</span><span class="sxs-lookup"><span data-stu-id="6659d-160">Fixed Version distribution mode</span></span>  

> [!NOTE]
> <span data-ttu-id="6659d-161">Режим распространения фиксированной версии пока недоступен.</span><span class="sxs-lookup"><span data-stu-id="6659d-161">The Fixed Version distribution mode is not available yet.</span></span>  

<span data-ttu-id="6659d-162">Для ограниченных сред существуют планы поддержки фиксированной версии, ранее названной собственным режимом распространения.</span><span class="sxs-lookup"><span data-stu-id="6659d-162">For constrained environments, there are plans to support a Fixed Version, previously named bring-your-own, distribution mode.</span></span>  <span data-ttu-id="6659d-163">Режим распространения с фиксированной версией позволяет разработчикам выбрать и упаковать определенную версию среды выполнения WebView2.</span><span class="sxs-lookup"><span data-stu-id="6659d-163">The Fixed Version distribution mode allows developers to select and package a specific version of the WebView2 Runtime.</span></span>  <span data-ttu-id="6659d-164">Режим распространения с фиксированной версией позволяет управлять тем, какая версия среды выполнения WebView2 используется приложением, и при обновлении компьютеров пользователей.</span><span class="sxs-lookup"><span data-stu-id="6659d-164">The Fixed Version distribution mode allows you to control which version of the WebView2 Runtime is used by your application, and when user machines are updated.</span></span>  <span data-ttu-id="6659d-165">Режим распространения фиксированной версии не получает никаких автоматических обновлений, и разработчики должны планировать применение обновлений самостоятельно.</span><span class="sxs-lookup"><span data-stu-id="6659d-165">The Fixed Version distribution mode doesn't receive any automatic updates, and developers should plan to apply updates themselves.</span></span>  


<!-- links -->  

[ConceptsVersioning]: ./versioning.md "Общие сведения о версиях браузеров и WebView2 | Документы Microsoft"  
[ReferenceWin3209622WebviewIdl]: ../reference/win32/0-9-622/webview2-idl.md  "Globals | Документы Microsoft"  

[Webview2Installer]: https://developer.microsoft.com/microsoft-edge/webview2 "Установщик WebView2"  
