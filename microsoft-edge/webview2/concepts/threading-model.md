---
description: Потоковая модель
title: Потоковая модель
author: MSEdgeTeam
ms.author: msedgedevrel
ms.date: 07/23/2020
ms.topic: conceptual
ms.prod: microsoft-edge
ms.technology: webview
keywords: IWebView2, IWebView2WebView, webview2, WebView, приложения WPF, WPF, EDGE, ICoreWebView2, ICoreWebView2Host, элемент управления "браузер", HTML Edge
ms.openlocfilehash: ad51afee97d3cc3e913ecdd73c4f0c2a99c70564
ms.sourcegitcommit: 553957c101f83681b363103cb6af56bf20173f23
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 07/24/2020
ms.locfileid: "10895562"
---
# Потоковая модель  

## Безопасность потоков  

WebView2 должен создаваться в потоке пользовательского интерфейса.  В частности, поток с конвейером сообщений.  Все обратные вызовы выполняются в этом потоке и запросы в WebView2 должны выполняться в этом потоке.  Небезопасно использовать WebView2 из другого потока.  

Единственным исключением является `Content` свойство `CoreWebView2WebResourceRequest` .  `Content`Поток свойств читается из фонового потока.  Поток должен быть гибким или создаваться из фонового STA, чтобы предотвратить снижение производительности потока пользовательского интерфейса.  

## Повторный вход  

Обратные вызовы, в том числе обработчики событий и обработчики завершения выполняются последовательно.  Если на вашем компьютере запущен обработчик событий и начинается цикл обработки сообщений, никакие другие обработчики событий и обратные вызовы завершения не смогут начать работу в небезопасном режиме.  

## Отсрочки  

Некоторые события WebView2 считывают значения, заданные для аргументов события, или выполняют некоторые действия после завершения обработчика событий.  Если вам также необходимо запустить асинхронную операцию, например обработчик событий, вы можете использовать `GetDeferral` метод для аргументов событий связанных событий.  Возвращенный объект РБП гарантирует, что обработчик событий не считается завершенным до тех пор, пока `Complete` `Deferral` не будет запрошен метод.  

Например, вы можете использовать `NewWindowRequested` событие для предоставления `CoreWebView2` соединения в качестве дочернего окна при завершении обработчика событий.  Но если требуется асинхронное создание `CoreWebView2` запроса, запросите `GetDeferral` метод в `NewWindowRequestedEventArgs` .  После того как вы создадите асинхронно `CoreWebView2` и установите `NewWindow` свойство в `NewWindowRequestedEventArgs` запросе, что `Complete` `Deferral` необходимо будет вернуть объект с помощью `GetDeferral` метода.  

<!-- links -->  
