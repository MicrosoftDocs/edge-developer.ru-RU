---
description: Убедитесь, что в веб-интерфейсе PWA есть удобное средство для Xbox
title: Адаптация PWA для Windows
author: MSEdgeTeam
ms.author: msedgedevrel
ms.date: 03/05/2020
ms.topic: article
ms.prod: microsoft-edge
keywords: прогрессивные веб-приложения, PWA, EDGE, Windows, UWP, Xbox, Xbox One, TVJS
ms.openlocfilehash: 8c2660c8821826660d2030f832ae449ff4a061ad
ms.sourcegitcommit: 6860234c25a8be863b7f29a54838e78e120dbb62
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 04/09/2020
ms.locfileid: "10572831"
---
# Прогрессивные веб-приложения для Xbox One

Вы можете распространить веб-приложение и сделать его доступным в качестве приложения Xbox One через Microsoft Store, не прерывая использование существующих платформ, сети CDN и сервера.  И, как и все приложения универсальной платформы Windows (UWP), прогрессивные веб-приложения (PWAs), запущенные на Xbox One, могут также вызывать встроенные API для Windows 10.  У Xbox One уже есть несколько PWAs, особенно в категории [приложений для воспроизведения мультимедиа](#media-pwas-on-xbox).  

В большинстве случаев вы можете упаковать PWA для Xbox One так же, как и в [Windows](./windows-features.md), с помощью средств [построителя PWA](https://www.pwabuilder.com/) или [Visual Studio](https://visualstudio.microsoft.com/vs/) IDE для создания файла *appxmanifest* , необходимого для запуска PWA в качестве приложения UWP. Тем не менее, это руководство поможет вам пройти несколько ключевых различий.

## Развертывание и тестирование PWAs на Xbox

Чтобы приступить к работе, выполните указанные ниже [действия, чтобы активировать *режим разработчика Xbox One* ](/windows/uwp/xbox-apps/devkit-activation) . После активации режима разработчика [Настройте *портал устройств для Xbox* ](/windows/uwp/debug-test-perf/device-portal-xbox) , чтобы получить удаленный доступ к Xbox из браузера в среде разработки.

Теперь вы готовы развернуть приложение для тестирования с помощью *построителя PWA* или *Visual Studio*.

### Вариант 1: конструктор PWA

[Конструктор PWA](https://www.pwabuilder.com/) — это приложение Node. js, которое можно установить из диспетчера пакетов узла (NPM). В нем используются метаданные вашего веб-сайта для создания собственных размещенных приложений на устройствах с Android, iOS и Windows. Если на вашем сайте уже есть [Манифест веб-приложения](https://developer.mozilla.org/docs/Web/Manifest), он будет использоваться построителем PWA для создания пакетов установки для конкретных платформ. В противном случае конструктор PWA создаст базовый файл *manifest. JSON* , основываясь на характеристиках сайта.

#### Требования
 - [Node. js](https://nodejs.org/en/), который включает NPM.

#### Настройка

1. Открыть командную команду узла для установки PWA Builder:

    ```
    npm install pwabuilder --global
    ```

2. Запустите конструктор PWA на своем URL-адресе:

    ```
    pwabuilder https://example.com/ -windows10
    ```

    Флаг *-windows10* ограничивает создание пакета до Windows 10 (UWP). Вы можете пропустить его, чтобы создать пакеты на всех поддерживаемых платформах, в том числе в iOS и Android. Дополнительные сведения вы видите в [документах PWA Builder](https://docs.pwabuilder.com/) .

3. На [портале устройства для Xbox](/windows/uwp/debug-test-perf/device-portal-xbox)перейдите на **страницу Главная**  >  **Мои игры & приложения**  >  **Add**, выберите параметр для *отправки свободных файлов*и выберите папку манифеста приложения Windows 10, созданную построителем PWA в текущем каталоге.

4. Следуйте указаниям мастера, чтобы завершить процесс установки. После установки. Вы сможете просматривать и запускать PWA на панели мониторинга Xbox One.


### Вариант 2: Visual Studio

Бесплатное полнофункциональное [сообщество Visual Studio 2017](https://visualstudio.microsoft.com/vs/community/) включает инструменты разработчика Windows 10, шаблоны универсальных приложений, редактор кода, мощный отладчик, эмуляторы Windows Mobile, богатый языковую поддержку и многое другое — все готово для использования в производстве. [ *Профессиональные* и *Корпоративные* ](https://visualstudio.microsoft.com/vs/compare/) версии предоставляют еще больше возможностей.

#### Требования

 - [**Visual Studio 2017**](https://visualstudio.microsoft.com/vs/
): любая версия, включая бесплатное издание для *разработчиков* .
 - [**Windows 10 SDK**](/windows/uwp/xbox-apps/development-environment-setup): Выберите этот дополнительный компонент в *установщике Visual Studio 2017*.

#### Настройка

1. Следуйте инструкциям по [настройке и запуску PWA в качестве универсального приложения для Windows](/microsoft-edge/progressive-web-apps-edgehtml/windows-features#set-up-and-run-your-universal-windows-app). Таким образом, у вас будет полноценно работоспособное приложение для Windows 10, которое может получить доступ к универсальным API Windows.

2. Теперь вы можете развертывать и отлаживать PWA (как приложение UWP) на Xbox One (как и в любом другом удаленном устройстве с Windows 10) с помощью [удаленного отладчика Visual Studio](/visualstudio/debugger/run-windows-store-apps-on-a-remote-machine?view=vs-2017
). Кроме того, вы можете установить PWA с помощью [портала устройств для Xbox](/windows/uwp/debug-test-perf/device-portal-xbox) , выполнив указанные ниже действия.

3. На портале устройства для Xbox перейдите на вкладку Главная > мои игры & приложения > добавить, выберите параметр для отправки *пакета приложения и зависимостей*.

4. Перейдите к папке пакета, созданной для вашего приложения, на шаге 1 и выберите *appx* -файл для отправки. [ *Appx* -файл](/windows/uwp/packaging/packaging-uwp-apps) — это файл пакета приложения UWP, который можно неопубликованного на любом устройстве в целях тестирования.

5. Затем коснитесь кнопки **зависимости** и выберите вложенную папку *зависимости* для вашего приложения и отправьте каждый из них. Этот этап необходим только для развертывания приложений с портала устройств для Xbox. Visual Studio доставляет зависимости, когда удаленная отладка и конечные пользователи уже будут установлены при доставке из Microsoft Store.

6. После загрузки пакета приложения и загруженных зависимостей нажмите кнопку **"перейти** " под разделом " *развернуть* ", и приложение будет установлено. Вы готовы запустить приложение с Xbox!

## Вопросы о UX для PWAs на Xbox

### Проектирование для работы в режиме "на 10 нижних колонтитулах"

Xbox One считается "10-футовым интерфейсом", что означает, что ваши пользователи будут работать на расстоянии не менее 10 метров от экрана. Таким образом, вы можете использовать приложение на этом расстоянии, а не в традиционном классическом интерфейсе веб-браузера с помощью мыши и клавиатуры. Руководство по проектированию и UX можно найти в статье [проектирование для Xbox и телевизора](/windows/uwp/design/devices/designing-for-tv).

### Знакомство с "ТВ SafeZone"

Производители телевизоров будут применять ["безопасные зоны"](/windows/uwp/design/devices/designing-for-tv#tv-safe-area) для содержимого, которое может обрезать приложение. По умолчанию мы применяем для вашего приложения безопасную границу, но вы можете гарантировать, что ваше приложение получает полный экран, вызвав [`setDesiredBoundsMode`](/uwp/api/windows.ui.viewmanagement.applicationview.setdesiredboundsmode) и указав [`useCoreWindow`](/uwp/api/windows.ui.viewmanagement.applicationviewboundsmode) следующие параметры:

```JavaScript
var applicationView = Windows.UI.ViewManagement.ApplicationView.getForCurrentView();
applicationView.setDesiredBoundsMode(Windows.UI.ViewManagement.ApplicationViewBoundsMode.useCoreWindow);
```

Дополнительные сведения об этом можно найти в [`Windows.UI.ViewManagement`](/uwp/api/windows.ui.viewmanagement) документации по пространству имен.

### Управление фокусировкой координат и навигацией

Методы пользовательского ввода для Xbox — это игровой планшет или пульт дистанционного управления, который использует [систему навигации XY](/windows/uwp/design/devices/designing-for-tv#xy-focus-navigation-and-interaction), что позволяет пользователю переключать фокус с элемента управления, перемещаясь вверх, вниз, влево и вправо.

Таким образом, вам нужно убедиться, что ваше приложение хорошо работает с помощью ТОЧЕЧной навигации. Кроме того, не забудьте [Отключить *режим мыши*](/windows/uwp/xbox-apps/how-to-disable-mouse-mode), установленный по умолчанию для приложений UWP (и скорее всего не применимый к интерфейсу Xbox).

Следующий код выключает `mouse` режим и позволяет вводить данные клавиатуры на планшете с помощью игрового поля:

```JavaScript
navigator.gamepadInputEmulation = "keyboard";
```

Кроме того, вы можете указать `gamepad` , что также выключает мышь, не создает события клавиатуры модели DOM и позволяет использовать стандартные API для игровой панели веб-сайта и/или WinRT.

Чтобы включить направленную навигацию, ознакомьтесь с [библиотекой TVJS](#tvjs), описанной далее.

### TVJS

[TVJS — это коллекция вспомогательных библиотек](https://github.com/Microsoft/TVHelpers) , которые упрощают создание веб-приложений для телевизора. Если вы собираетесь создать размещенное веб-приложение, которое также запускается на Xbox, TVJS поможет добавить поддержку *направленной навигации*, а также несколько элементов управления, которые облегчают взаимодействие с содержимым на телевизоре.

[Направленная Навигация](https://github.com/Microsoft/TVHelpers/wiki/Using-DirectionalNavigation) — это функция TVJS, которая обеспечивает автоматическую двухмерную навигацию на страницах телевизионного приложения. С его помощью не нужно перехватывать и обрабатывать навигацию на страницах вашего приложения, а также явно указывать все допустимые целевые объекты фокуса для каждого элемента в пользовательском интерфейсе. Автоматическая обработка фокуса позволяет пользователям легко перемещаться по интуитивно понятным и надежным функциям.

По мере того как пользователь переходит к пользовательскому интерфейсу приложения с помощью кнопок направления устройства, алгоритм автоматического фокуса рассматривает набор возможных целевых объектов фокуса, определяет следующий элемент, на который нужно перейти, и затем автоматически устанавливает фокус на этот элемент. Для определения следующего элемента алгоритм сочетает направленный ввод, историю фокуса, а также физический макет элементов пользовательского интерфейса на странице.

Чтобы включить направленную навигацию, добавьте следующую ссылку на сценарий:

```HTML
<script src="directionalnavigation-1.0.0.0.js"></script>
```

По умолчанию `<a>` `<button>` `<input>` `<select>` `<textarea>` фокус перемещается только на элементы. Чтобы включить фокус на других элементах, назначьте им допустимый [TabIndex](https://developer.mozilla.org/docs/Web/HTML/Global_attributes/tabindex).

```HTML
<div tabindex="0″>This div is eligible for focus</div>
```

Ознакомьтесь с документацией по [DirectionalNavigation](https://github.com/Microsoft/TVHelpers/wiki/DirectionalNavigation) , чтобы узнать, как изменить корневой элемент, установить первоначальный фокус, перекрыть следующий фокус, оптимизировать элементы для фокуса, настроить входные данные. Кроме того, существует ряд других полезных примеров.

## Мультимедиа PWAs на Xbox

Если вы собираетесь создать версию PWA для Xbox One, необходимо учитывать указанные ниже моменты.

### Расширения зашифрованного мультимедиа (ОБНОВЛЕННОЙ) в браузере

Браузер Microsoft EDGE на Xbox One не поддерживает [зашифрованные расширения мультимедиа](https://developer.mozilla.org/docs/Web/API/Encrypted_Media_Extensions_API) (обновленной). Если мультимедиа-приложение использует его для управления цифровыми правами (DRM), вы не сможете запускать ее из браузера на Xbox. Вместо этого используйте прототип и протестируйте его в качестве [приложения Xbox One с помощью PWABuilder или Visual Studio](#deploying-and-testing-pwas-on-xbox), как описано выше. Вы также можете запустить его в браузере Microsoft EDGE в Windows, где ОБНОВЛЕННОЙ полностью поддерживается.

### Интеграция с системными элементами управления транспортировкой мультимедиа

Если ваше приложение является приложением мультимедиа, важно, чтобы приложение реагировало на элементы управления мультимедиа, инициированные пользователем с помощью экранных кнопок, [голосовых команд кортаны](https://support.xbox.com/xbox-one/console/cortana-voice-commands), [системных элементов управления транспортом мультимедиа](/windows/uwp/audio-video-camera/system-media-transport-controls) в области навигации, а также приложений [Xbox](https://www.microsoft.com/p/xbox/9wzdncrfjbd8
) и [Xbox One SmartGlass](https://www.microsoft.com/p/xbox-one-smartglass/9wzdncrfhvx2) на других устройствах. Ознакомьтесь с элементом управления [MediaPlayer](https://github.com/Microsoft/TVHelpers/wiki/MediaPlayer-Overview) из [библиотеки TVJS](#tvjs), который автоматически интегрируется с этими элементами управления. Кроме того, вы можете вручную [интегрироваться с системными элементами управления транспортировкой мультимедиа](https://msdn.microsoft.com/windows/uwp/audio-video-camera/system-media-transport-controls).

### Шифрование содержимого PlayReady

На момент написания этой статьи [ `cbcs` Поддержка кодирования ограничена](/playready/packaging/content-encryption-modes#support-for-the-cbcs-aes-cbc-encryption-scheme) клиентом PlayReady для Xbox one (версии 1709 или выше). Если мультимедиа для PWA поддерживает только шифрование *CBCS* , имейте в виду, что функциональность вашего приложения будет ограничена (или полностью недоступна) в Windows.



## См. также
[Видео с Южной узором](https://github.com/Microsoft/uwp-experiences/tree/master/apps/video): образец видеоприложения для Xbox, созданного с помощью реагируют на JS и размещенных на веб-сервере.

[Проектирование для Xbox и телевизора](/windows/uwp/design/devices/designing-for-tv): Разработайте приложение универсальной платформы Windows (UWP), чтобы оно хорошо выглядело на экране Xbox One и телевизоры.

[Рекомендации для Xbox](/windows/uwp/xbox-apps/tailoring-for-xbox): следуйте этим рекомендациям, чтобы настроить приложение для Xbox One.

[PWAs в магазине Майкрософт](/microsoft-edge/progressive-web-apps-edgehtml/microsoft-store): Вот как (и почему!) отправить PWA в Microsoft Store.

[UWP на Xbox One](/windows/uwp/xbox-apps/): полное руководство по разработке приложений для приложения UWP для Xbox One.
