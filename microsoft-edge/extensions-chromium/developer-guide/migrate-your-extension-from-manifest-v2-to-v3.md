---
description: Узнайте о том, как обновить расширение с манифеста v2 на v3
title: Подготовка к обновлению расширений из манифеста v2 в v3
author: MSEdgeTeam
ms.author: msedgedevrel
ms.date: 10/13/2020
ms.topic: article
ms.prod: microsoft-edge
keywords: Edge-Chromium, Разработка расширений, расширения EDGE, расширения для браузеров, надстройки, разработчик, манифест v3, миграция в манифест v3
ms.openlocfilehash: 262a5cab54dd23f596791c93ec1238619e247333
ms.sourcegitcommit: 1ad087b00df16fd7718a5d95226de57e29b335e1
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 10/14/2020
ms.locfileid: "11117833"
---
# Подготовка к обновлению расширений из манифеста v2 в v3 

В этом документе перечислены важные изменения, реализуемые в рамках манифеста v3, который является следующей версией платформы расширений Chromium. В ходе реализации мы будем обновлять этот документ. Подробное руководство по переносу расширения на манифест v3 можно найти в разделе [Миграция на манифест v3][Google_Migrate_to_MV3]. 

## Удаленно размещенный код  

Сегодня расширения могут размещать части кода в удаленном режиме, а не включать их в пакет расширения во время проверки. Несмотря на то что это обеспечивает гибкость для изменения кода без повторной отправки расширения в магазин, этот код можно использовать после установки. Чтобы убедиться в том, что [надстройки Microsoft Edge][EdgeAddons] имеют проверенные расширения, мы не допускайте использование удаленно управляемого кода расширениями. Это изменение повышает безопасность расширений. Разработчикам потребуется упаковать и отправить весь код, который используется расширением для проверки подлинности. Кроме того, разработчики могут использовать функцию eval () в [изолированной среде][sandboxingEval]. 

## Разрешения узла во время выполнения  

В процессе установки расширения могут запросить общие разрешения на доступ ко всем сайтам и контенту. Эти разрешения разрешают расширениям работу с минимальным вмешательством и создают риск для обеспечения конфиденциальности и безопасности пользователей. Для улучшения прозрачности мы предоставляем пользователям элементы управления для разрешения или ограничения доступа к веб-сайтам во время выполнения. 

## Запросы между источниками в сценариях содержимого  

Сегодня сценарии контента могут запросить доступ к любой происхождению, в том числе к источникам, которые не разрешены на веб-сайте. Это поведение разбивается на источники, которые не являются принципами. После пересылки вам понадобятся сценарии содержимого, чтобы иметь те же разрешения, что и страница, в которую они были добавлены, и закрыв потенциальные loophole безопасности. Для выполнения запросов между источниками необходимо использовать фоновые сценарии для ретрансляции ответов на сценарии содержимого. Эти изменения доступны и отстает от отметки. Для получения дополнительных сведений перейдите к этому [документу][CORS]. 

## API веб-запросов  

Мы заменяем [API веб-запросов][WebRequestAPI] на [ДЕКЛАРАТИВНЫЙ сетевой интерфейс API][DeclarativeNetRequestAPI], но продолжат отслеживать возможности наблюдения для веб-запросов. За исключением некоторых конкретных ситуаций, в которых для расширения необходимы возможности API веб-запросов, рекомендуется использовать только API DNR. Мы считаем, что это изменение повлияет на расширения, которые используют сложные декларативные возможности. Как и в случае с дополнительными расширениями API DNR, это изменение улучшит конфиденциальность пользователей, которое способствует повышению уровня доверия при использовании расширений.
Предприятия могут продолжать использовать функцию блокировки API веб-запросов для расширений, управляемых через политики предприятия. Для получения дополнительных сведений о политиках расширения перейдите в раздел [Microsoft Edge – политики][MicrosoftEdgePolicies]. 

## Фоновые работники служб  
 
Сотрудники службы доступны для тестирования в Канарские. Для переноса расширений с фоновых страниц на сотрудников служб ознакомьтесь со [страницами переход с фоновых страниц на служебные][ServiceWorkers]. Мы рекомендуем & оценить влияние этого изменения на то, что это изменение повлияет на пользователей и разработчиков. Дополнительные сведения об этом изменении этого документа будут добавлены в будущем. 

## Когда эти изменения будут доступны в Microsoft Edge?

Текущая декларативная реализация интерфейса API сетевого запроса доступна в стабильных и бета-каналах. Разработчики могут протестировать эти изменения и оставить отзыв. Мы будем вносить усилия в разработку и проанализировать другие изменения. 

| Имя канала | Описание |
|:--- |:--- |  
| Microsoft Edge 84 стабильный | API DNR доступен для тестирования |  
| Бета-версия Microsoft Edge 85 | Доступна поддержка изменения заголовка| 

Когда изменения вносятся в Chromium, мы будем делиться временными шкалами, чтобы разработчики могли обновить свой код и повторно опубликовать расширения в магазине. 

Мы будем продолжать публиковать обновления в нашем блоге. Вы можете отправить свой отзыв по этим изменениям с помощью [TechCommunity][TechCommunity].

<!-- links -->  

[EdgeAddons]: https://microsoftedge.microsoft.com/addons/ "Надстройки Microsoft Edge"  
[MicrosoftBlog]: https://blogs.windows.com/windowsexperience/2018/12/06/microsoft-edge-making-the-web-better-through-more-open-source-collaboration/  
[MicrosoftEdgePolicies]: https://docs.microsoft.com/deployedge/microsoft-edge-policies#extensions 

[TechCommunity]: https://techcommunity.microsoft.com/t5/articles/manifest-v3-changes-are-now-available-in-microsoft-edge/m-p/1780254 "Сообщество специалистов"  


[Google_Migrate_to_MV3]: https://developer.chrome.com/extensions/migrating_to_manifest_v3   
[SandboxingEval]: https://developer.chrome.com/apps/sandboxingEval "Использование eval в расширениях Chrome. Извлечен."
[CORS]: https://www.chromium.org/Home/chromium-security/extension-content-script-fetches "Изменения запросов на запросы между источниками в сценариях расширения содержимого"
[WebRequestAPI]: https://developer.chrome.com/extensions/webRequest "API веб-запросов"  
[DeclarativeNetRequestAPI]: https://developer.chrome.com/extensions/declarativeNetRequest/ "API-интерфейс декларативного сетевого запроса"
[ServiceWorkers]:  https://developers.chrome.com/extensions/migrating_to_service_workers


