---
description: Использование панели "Сотрудники-службы" для управления и отладки сотрудников служб
title: DevTools — отладка — рабочие службы
author: MSEdgeTeam
ms.author: msedgedevrel
ms.topic: article
ms.prod: microsoft-edge
keywords: microsoft edge, веб-разработка, средства f12, devtools, отладка, отладка, pwa, рабочий процесс службы, API кэша
ms.custom: seodec18
ms.date: 11/19/2020
ROBOTS: NOINDEX,NOFOLLOW
ms.openlocfilehash: 99592f787da8bcf89d2e16231aa3f39047b4fc0b
ms.sourcegitcommit: a35a6b5bbc21b7df61d08cbc6b074b5325ad4fef
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 12/17/2020
ms.locfileid: "11235588"
---
# <span data-ttu-id="fbe87-104">Служебные сценарии</span><span class="sxs-lookup"><span data-stu-id="fbe87-104">Service Workers</span></span>

<span data-ttu-id="fbe87-105">Панель \*\*\*\* "Сотрудники-службы" имеет средства для управления и отладки сотрудников служб для вашего сайта, чтобы помочь вам:</span><span class="sxs-lookup"><span data-stu-id="fbe87-105">The **Service Workers** panel has tools for managing and debugging the service workers for your site, to help you:</span></span>

 - <span data-ttu-id="fbe87-106">Обзор всех сотрудников служб, связанных с сайтом, и сведения об их области и состоянии</span><span class="sxs-lookup"><span data-stu-id="fbe87-106">Get an overview of all the service workers associated with your site and details of their scope and status</span></span>
 - <span data-ttu-id="fbe87-107">**Обновление** и управление **(отрегистрация)** регистрации рабочих служб для заданной области</span><span class="sxs-lookup"><span data-stu-id="fbe87-107">**Update** and manage (**Unregister**) the service worker registration for the given scope</span></span>
 - <span data-ttu-id="fbe87-108">**Push** a test notification</span><span class="sxs-lookup"><span data-stu-id="fbe87-108">**Push** a test notification</span></span>
 - <span data-ttu-id="fbe87-109">**Stop** / **Запуск отдельных** сотрудников служб и</span><span class="sxs-lookup"><span data-stu-id="fbe87-109">**Stop**/**Start** individual service workers, and</span></span>
 - <span data-ttu-id="fbe87-110">**Проверка** выбранного рабочего места службы в отдельном окне отладки</span><span class="sxs-lookup"><span data-stu-id="fbe87-110">**Inspect** the selected service worker in a separate debugger window</span></span>

![Обзорная области "Рабочий работник службы"](./media/service_worker.png)

<span data-ttu-id="fbe87-112">Обратите внимание на следующие вопросы об отладке рабочих служб в Edge DevTools:</span><span class="sxs-lookup"><span data-stu-id="fbe87-112">Please note the following about service worker debugging in Edge DevTools:</span></span>

 - <span data-ttu-id="fbe87-113">Отладка сотрудника службы запускает новый экземпляр DevTools отдельно от средств страницы, так как сотрудники службы могут совместно использовать несколько вкладок.</span><span class="sxs-lookup"><span data-stu-id="fbe87-113">Debugging a service worker will launch a new instance of the  DevTools separate from the page's tools because service workers can be shared across multiple tabs.</span></span>
 - <span data-ttu-id="fbe87-114">Элементы [**и**](./elements.md) [\*\*\*\*](./emulation.md) панели эмуляции отсутствуют в отладке рабочего отладка службы, поскольку сотрудники служб работают в фоновом режиме и не управляют напрямую на переднем плане приложения.</span><span class="sxs-lookup"><span data-stu-id="fbe87-114">The [**Elements**](./elements.md) and [**Emulation**](./emulation.md) panels are absent from the service worker debugger, given that service workers run in the background and do not directly control the front-end of your app.</span></span>
 - <span data-ttu-id="fbe87-115">В настоящее время сетевой трафик для сотрудника службы передается только из экземпляра отладки DevTools для этого рабочего, а не из экземпляра отлада для самой страницы.</span><span class="sxs-lookup"><span data-stu-id="fbe87-115">Currently network traffic for a service worker is only reported from the  DevTools debugging instance for that worker, and not from the debugger instance for the page itself.</span></span>
 - <span data-ttu-id="fbe87-116">Чтобы имитировать **push-событие** из DevTools, необходимо \*\* добавить прослушиватель push-событий в рабочий процесс службы, чтобы наблюдать за его эффектом.</span><span class="sxs-lookup"><span data-stu-id="fbe87-116">To simulate a **Push** from the DevTools, you'll need to add a *push* event listener to your service worker in order to observe its effect.</span></span> <span data-ttu-id="fbe87-117">В следующем примере пошагово напечатается сообщение "Тестирование push-сообщений от DevTools" в консоли рабочего **консоли службы.**</span><span class="sxs-lookup"><span data-stu-id="fbe87-117">The following example will print "Test push message from DevTools" in your service worker **Console**.</span></span>

   ```JavaScript
   self.addEventListener('push', function(event){
       console.log(event.data.text());
   });
   ```

<span data-ttu-id="fbe87-118">Вот несколько общих моментов, которые необходимо помнить при использовании сотрудников службы.</span><span class="sxs-lookup"><span data-stu-id="fbe87-118">Here are some general things to keep in mind when using service workers:</span></span>

- **<span data-ttu-id="fbe87-119">Только HTTPS.</span><span class="sxs-lookup"><span data-stu-id="fbe87-119">HTTPS-only.</span></span>** <span data-ttu-id="fbe87-120">Сотрудники службы не будут работать в HTTP; необходимо использовать ПРОТОКОЛ HTTPS.</span><span class="sxs-lookup"><span data-stu-id="fbe87-120">Service workers will not work in HTTP; you will need to use HTTPS.</span></span> <span data-ttu-id="fbe87-121">Однако вы можете зарегистрировать сотрудников служб в `localhost` целях тестирования.</span><span class="sxs-lookup"><span data-stu-id="fbe87-121">However, you can register service workers on `localhost` for testing purposes.</span></span>

- **<span data-ttu-id="fbe87-122">Доступ к DOM запрещен.</span><span class="sxs-lookup"><span data-stu-id="fbe87-122">No DOM access allowed.</span></span>** <span data-ttu-id="fbe87-123">Как и для веб-работников, доступ к объектной модели страницы не данная.</span><span class="sxs-lookup"><span data-stu-id="fbe87-123">As with web workers, you don't get access to the page's object model.</span></span> <span data-ttu-id="fbe87-124">Это означает, что если вам нужно изменить что-либо о странице, необходимо использовать от рабочего сотрудника службы на страницу, чтобы можно было обрабатывать изменения DOM со [`postMessage`](https://developer.mozilla.org/docs/Web/API/Worker/postMessage) страницы.</span><span class="sxs-lookup"><span data-stu-id="fbe87-124">This means that if you need to change something about the page, you'll need to use [`postMessage`](https://developer.mozilla.org/docs/Web/API/Worker/postMessage) from the service worker to the page so that you can handle it DOM changes from the page.</span></span>

- **<span data-ttu-id="fbe87-125">Выполняется отдельно от страницы.</span><span class="sxs-lookup"><span data-stu-id="fbe87-125">Executes separate from page.</span></span>** <span data-ttu-id="fbe87-126">Так как эти сценарии не привязаны к времени существования страницы, важно понимать, что они не имеют одного контекста со страницей.</span><span class="sxs-lookup"><span data-stu-id="fbe87-126">Because these scripts are not tied to the lifetime of a page, it's important to understand that they do not share the same context as the page.</span></span> <span data-ttu-id="fbe87-127">Помимо того, что у них нет доступа к DOM (как было сказано ранее), у них не будет доступа к тем же переменным, которые доступны на странице.</span><span class="sxs-lookup"><span data-stu-id="fbe87-127">Aside from not having access to the DOM (as stated earlier), they won't have access to the same variables available on the page.</span></span>

- **<span data-ttu-id="fbe87-128">*Переопределяет кэш приложений.*</span><span class="sxs-lookup"><span data-stu-id="fbe87-128">Overrides *App Cache*.</span></span>** <span data-ttu-id="fbe87-129">Кэш приложений будет игнорироваться при использовании сотрудников службы.</span><span class="sxs-lookup"><span data-stu-id="fbe87-129">App Cache will be ignored when service workers are in use.</span></span> <span data-ttu-id="fbe87-130">API Service Worker предназначен для того, чтобы полностью вытеснить кэш приложений, предоставляя более детализированный контроль веб-разработчику.</span><span class="sxs-lookup"><span data-stu-id="fbe87-130">The Service Worker API is intended to entirely supplant App Cache  by giving more granular control to the web developer.</span></span>

  - **<span data-ttu-id="fbe87-131">Сценарий не может быть в CDN.</span><span class="sxs-lookup"><span data-stu-id="fbe87-131">Script can't be on CDN.</span></span>** <span data-ttu-id="fbe87-132">Файл JavaScript для рабочего сотрудника службы не может быть включен в сеть распространения содержимого (CDN), он должен быть в том же домене, что и страница.</span><span class="sxs-lookup"><span data-stu-id="fbe87-132">The JavaScript file for the service worker can't be hosted on a Content Distribution Network (CDN), it must be on the same domain as the page.</span></span> <span data-ttu-id="fbe87-133">Однако при этом можно импортировать сценарии из CDN.</span><span class="sxs-lookup"><span data-stu-id="fbe87-133">However, if you like, you can import scripts from your CDN.</span></span>

- **<span data-ttu-id="fbe87-134">Может быть завершен в любое время.</span><span class="sxs-lookup"><span data-stu-id="fbe87-134">Can be terminated any time.</span></span>** <span data-ttu-id="fbe87-135">Рабочие службы должны быть кратковременны и их жизненный срок связан с событиями.</span><span class="sxs-lookup"><span data-stu-id="fbe87-135">Service workers are meant to be short-lived and their lifetime is tied to events.</span></span> <span data-ttu-id="fbe87-136">В частности, у сотрудников служб есть ограничение по времени, в течение которого они должны завершить выполнение обработчиков событий.</span><span class="sxs-lookup"><span data-stu-id="fbe87-136">In particular, service workers have a time limit in which they must finish executing their event handlers.</span></span> <span data-ttu-id="fbe87-137">В других случаях браузер или операционная система могут завершить работу службы, которая влияет на потребление батареи, ЦП или памяти.</span><span class="sxs-lookup"><span data-stu-id="fbe87-137">In other cases, the browser or the operating system may choose to terminate a service worker that impacts the battery, CPU, or memory consumption.</span></span> <span data-ttu-id="fbe87-138">В любом случае избегайте использования глобальных переменных в скрипте рабочего сценария службы, если для последующего обрабатываемого события используется другой рабочий экземпляр службы.</span><span class="sxs-lookup"><span data-stu-id="fbe87-138">In either case, avoid relying on global variables in the service worker script in case a different service worker instance is used on a subsequent event that's being handled.</span></span>

- **<span data-ttu-id="fbe87-139">Разрешены только асинхронные запросы.</span><span class="sxs-lookup"><span data-stu-id="fbe87-139">Only asynchronous requests allowed.</span></span>** <span data-ttu-id="fbe87-140">Синхронный XHR здесь не разрешен!</span><span class="sxs-lookup"><span data-stu-id="fbe87-140">Synchronous XHR is not allowed here!</span></span> <span data-ttu-id="fbe87-141">Не является localStorage, поэтому лучше использовать IndexedDB и новый API кэша, описанные выше.</span><span class="sxs-lookup"><span data-stu-id="fbe87-141">Neither is localStorage, so it's best to make use of IndexedDB and the new Caches API described earlier.</span></span>

- **<span data-ttu-id="fbe87-142">Область действия рабочего сотрудника службы — 1:1.</span><span class="sxs-lookup"><span data-stu-id="fbe87-142">Service worker to scope is 1:1.</span></span>** <span data-ttu-id="fbe87-143">В области может быть только один рабочий сотрудник службы.</span><span class="sxs-lookup"><span data-stu-id="fbe87-143">You'll only be able to have one service worker per scope.</span></span> <span data-ttu-id="fbe87-144">Это означает, что при попытке зарегистрировать другого сотрудника службы для области, в которую уже есть рабочий сотрудник службы, этот рабочий работник будет обновлен.</span><span class="sxs-lookup"><span data-stu-id="fbe87-144">That means if you try to register a different service worker for a scope that already has a service worker, that service worker will be updated.</span></span>
