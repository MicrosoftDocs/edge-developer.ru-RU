---
description: Убедитесь, что содержимое мультимедиа на сайте ведет себя по назначению
title: Политики автозахваки — руководство разработчика
author: MSEdgeTeam
ms.author: msedgedevrel
ms.topic: article
ms.prod: microsoft-edge
keywords: edge, мультимедиа, видео, звук, автозапись
ms.custom: seodec18
ms.date: 11/19/2020
ROBOTS: NOINDEX,NOFOLLOW
ms.openlocfilehash: 85b91a8b87d73d6fccc6eac2aa64513f283d7f21
ms.sourcegitcommit: a35a6b5bbc21b7df61d08cbc6b074b5325ad4fef
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 12/17/2020
ms.locfileid: "11235412"
---
# Политики автозахваки  

[!INCLUDE [deprecation-note](../../includes/legacy-edge-note.md)]  

Microsoft Edge предоставляет клиентам возможность персонализировать свои предпочтения браузера на веб-сайтах, на которые автоматически передается мультимедиа со звуком, чтобы свести к минимуму отвлекающие факторы в Интернете и сэкономить пропускную способность.  Кроме того, Microsoft Edge автоматически подавляет автозапок мультимедиа на фоновых вкладок.  

Пользователи могут настраивать поведение мультимедиа [](#per-site-media-autoplay-settings) с помощью [глобальных](#global-media-autoplay-settings) и индивидуальных элементов управления автоза воспроизведением, которые предоставляют следующие параметры:  

*   `Allow`  По умолчанию видео будет продолжаться при первом просмотре вкладки на переднем плане по усмотрению сайта.  

*   `Limit`  Автозапись работает только при отключаемом видео, поэтому пользователи никогда не будут уверены в звуке.  Когда пользователь нажмет кнопку в любом месте страницы, автозаигрывка будет включена повторно и будет разрешена в пределах этого домена на этой вкладке.  

*   `Block`  Запретить заместь на всех сайтах, пока пользователи не будут напрямую взаимодействовать с содержимым мультимедиа.  

## Глобальные параметры автоматического воспроизведения мультимедиа  

Пользователи могут управлять поведением автозаполнения по умолчанию для всех сайтов в режиме "Дополнительный **параметр**  >  **мультимедиа".**  

:::image type="complex" source="../media/autoplay_global.png" alt-text="Глобальные параметры автоматического воспроизведения мультимедиа" lightbox="../media/autoplay_global.png":::
   Глобальные параметры автоматического воспроизведения мультимедиа  
:::image-end:::  

## Параметры автозахваки мультимедиа на сайте  

Пользователи могут управлять поведением автозахва **** на уровне сайта в разделе "Разрешения веб-сайта" области сведений о веб-сайте.  Этот параметр можно найти, щелкнув значок сведений или значок блокировки **** в левой части адресной панели и щелкнув параметры автозаписи мультимедиа для начала работы.  

Параметры на уровне сайта переопределяют глобальный параметр.  Например, если у пользователя есть свой глобальный параметр, но он изменяет параметр на уровне сайта, автозаигрывка для этого `Allow` `Block` сайта будет заблокирована.  

:::image type="complex" source="../media/autoplay_per-site.png" alt-text="Параметры автозахваки мультимедиа на сайте" lightbox="../media/autoplay_per-site.png":::
   Параметры автозахваки мультимедиа на сайте  
:::image-end:::  

## Best Practices for Web Developers  

Вот как обеспечить хороший пользовательский интерфейс с мультимедиа, который находится на сайте:  

*   Предположим, что для каждого использования элемента мультимедиа требуется жест пользователя, чтобы начать воспроизведение (так как пользователи могут блокировать автозапок в любой момент времени)) и спланируйте его соответствующим образом.  Глобальные политики автозахваки и политики автозахваки на уровне сайта применяются к всем элементам и элементам независимо от того, как они используются `<audio>` `<video>` на сайте  

*   Убедитесь, что элементы управления мультимедиа всегда присутствуют как на носители сайта, так и на содержимом.  Это позволит пользователям перезапустить воспроизведение, если автозапуск заблокирован на странице.  

*   Оцените, как автозагрузка может повлиять на работу пользователей на вашем веб-сайте, и рассмотрите возможность использования автозагрузки таким образом, чтобы свести к минимуму нежелательное воспроизведение мультимедиа.  Если автозагрузка является важной частью вашего интерфейса, рассмотрите возможность запуска отключенного содержимого и разрешите пользователю отключать его.  Для автоматического воспроизведения отключенного содержимого источник звука должен быть явно отключен или не за установлен.  В противном случае элемент не будет считаться отключенным.  

*   Если нет абсолютной необходимости, используйте для воспроизведения мультимедиа элементы управления браузера.  Это обеспечит согласованное впечатление для пользователей.  При создании пользовательских элементов управления убедитесь, что элементы управления мультимедиа всегда присутствуют и ваши элементы управления правильно реагируют на подавление автозахва.  

### Делегирования Iframe  

Автозапись в автозахвах наследует разрешение на автозапись `<iframe>` от родительской страницы независимо от источника контента.  В сценарии списка воспроизведения, где каждый файл мультимедиа находится в отдельном iframe, пользователю потребуется начать воспроизведение только один раз для всего списка воспроизведения.  

### Обнаружение разрешенных автозахва  

Вы можете настроить элементы управления воспроизведением, чтобы показать правильное состояние при блокировке автозазахва, изучив обещание, возвращенные функцией в `play()` элементе мультимедиа:  

```javascript
var promise = document.querySelector('video').play();

if (promise !== undefined) { 
    promise.catch(_error => { 
        // Autoplay was blocked
        // Show user media controls to manually start playback
    }).then(() => { 
        // Autoplay started
    }); 
}
```  
