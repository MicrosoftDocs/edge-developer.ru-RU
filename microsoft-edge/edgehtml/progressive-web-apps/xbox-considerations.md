---
description: Убедитесь, что ваш PWA обеспечивает отличный опыт для Xbox
title: Прогрессивное веб-приложение для Xbox One
author: MSEdgeTeam
ms.author: msedgedevrel
ms.topic: article
ms.prod: microsoft-edge
keywords: последовательные веб-приложения, PWA, Edge, Windows, UWP, Xbox, Xbox One, TVJS
ms.date: 12/15/2020
ROBOTS: NOINDEX,NOFOLLOW
ms.openlocfilehash: f1c46fe49f335373323de106b1b2a84418b97577
ms.sourcegitcommit: a35a6b5bbc21b7df61d08cbc6b074b5325ad4fef
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 12/17/2020
ms.locfileid: "11235852"
---
# Прогрессивное веб-приложение для Xbox One  

Вы можете расширить веб-приложение и сделать его доступным в качестве приложения Xbox One через Microsoft Store, продолжая при этом использовать существующие инфраструктуры, CDN и серверные серверы.  Как и все приложения универсальной платформы Windows (UWP), приложения Progressive Web Apps (PWAs), работающие на Xbox One, также могут вызывать API Windows 10.  Для Xbox One уже доступно несколько pwAs, особенно в категории приложений [для воспроизведения мультимедиа.](#media-pwas-on-xbox)  

По большей части вы можете упаковировать PWA для Xbox One так же, как и для [Windows,](./windows-features.md)используя средства построитель [PWA](https://www.pwabuilder.com/) или IDE [Visual Studio](https://visualstudio.microsoft.com/vs/) для создания *appxmanifest-файла,* необходимого для запуска PWA в качестве приложения UWP. Однако в этом руководстве есть несколько основных различий.

## Развертывание и тестирование PWAs на Xbox

Для начала выполните следующие [действия, чтобы активировать *режим разработчика Xbox One.* ](/windows/uwp/xbox-apps/devkit-activation) После активации режима разработчика [настроите *портал устройств для Xbox,* ](/windows/uwp/debug-test-perf/device-portal-xbox) чтобы получить удаленный доступ к Xbox из браузера в среде разработки.

Теперь вы готовы развернуть приложение для тестирования с помощью построитель *PWA* *или Visual Studio.*

### Вариант 1. Построитель PWA

[Построитель PWA](https://www.pwabuilder.com/) — это Node.js, которое можно установить из node диспетчер пакетов (NPM). Он использует метаданные вашего веб-сайта для создания нативных приложений, которые можно использовать в Android, iOS и Windows. Если на вашем сайте уже [есть](https://developer.mozilla.org/docs/Web/Manifest)манифест веб-приложения, построитель PWA будет использовать его для создания пакетов установки для определенной платформы. В противном случае построитель PWA создает базовыйmanifest.js* на* основе файла на основе характеристик сайта.

#### Требования

 - [Node.js, ](https://nodejs.org/en/)в том числе NPM.

#### Настройка

1.  Откройте командную команду Node, чтобы установить построитель PWA:
    
    ```shell
    npm install pwabuilder --global
    ```  
    
2.  Запустите построитель PWA на URL-адресе веб-сайта:
    
    ```shell
    pwabuilder https://example.com/ -windows10
    ```  
    
    Флаг *-windows10* ограничивает генерацию пакета Windows 10 (UWP). Его можно опустить для создания пакетов на всех поддерживаемых платформах, включая iOS и Android. Дополнительные сведения см. в документы [построитель PWA.](https://docs.pwabuilder.com/)
    
3.  На портале устройств для **** [Xbox](/windows/uwp/debug-test-perf/device-portal-xbox)перейдите на сайт Home  >  **My games & приложения**  >  **"Добавить",** ** выберите параметр для отправки свободных файлов и выберите папку манифеста приложения для Windows 10, созданную построителем PWA в текущем каталоге.

4.  Пошаговая пошаговая процедура установки мастера. После установки. Вы сможете увидеть и запустить PWA с информационной панели Xbox One.
    
### Вариант 2. Visual Studio

Бесплатное полноразмерное Visual Studio [Community 2017](https://visualstudio.microsoft.com/vs/community/) включает средства разработчика Windows 10, универсальные шаблоны приложений, редактор кода, мощный отладчик, эмуляторы Windows Mobile, языковую поддержку и многое другое— все готово к использованию в производственной версии. Версии [ *Professional* *и Enterprise* ](https://visualstudio.microsoft.com/vs/compare/) предоставляют еще больше возможностей.

#### Требования

-   [**Visual Studio 2017**](https://visualstudio.microsoft.com/vs/
    ): любая версия, включая бесплатный *выпуск Community.*
-   [**Windows 10 SDK**](/windows/uwp/xbox-apps/development-environment-setup): выберите этот необязательный компонент в *установщике Visual Studio 2017.*
    
#### Настройка

1.  Выполните действия, чтобы настроить и [запустить PWA в качестве универсального приложения для Windows.](/microsoft-edge/progressive-web-apps-edgehtml/windows-features#set-up-and-run-your-universal-windows-app) Благодаря этому у вас будет полностью работающие приложения для Windows 10, которые могут получать доступ к универсальным API Для Windows.
2.  Теперь вы можете развернуть и отладить PWA (в качестве приложения UWP) на Xbox One (как и любое другое удаленное устройство с Windows 10) с помощью [Visual Studio удаленного отладчика](/visualstudio/debugger/run-windows-store-apps-on-a-remote-machine?view=vs-2017 &preserve-view=true). Кроме того, вы можете установить PWA с помощью портала [устройств для Xbox,](/windows/uwp/debug-test-perf/device-portal-xbox) вы предприняв следующие действия.
3.  На портале устройств для Xbox перейдите на сайт "Главная" > "Мои игры & приложения > Добавить", выберите параметр отправки пакета приложения и *зависимостей.*
4.  Перейдите в папку пакета, созданную для вашего приложения на шаге 1, и выберите *APPX-файл* для отправки. [ *APPX-файл* —](/windows/uwp/packaging/packaging-uwp-apps) это файл пакета приложения UWP, который можно выгрузить на любое устройство для тестирования.
5.  Затем нажмите **кнопку "Зависимости",** выберите *вложенную* папку зависимостей для вашего приложения и загрузите каждую из них. Этот шаг требуется только для развертывания приложений с портала устройств для Xbox. Visual Studio обеспечивает зависимости при удаленной отладке, и компьютер пользователя уже будет устанавливать их при доставке из Microsoft Store.
6.  После отправки пакета приложения и зависимостей нажмите ** кнопку **"Перейти"** в разделе "Развертывание", и приложение будет установлено. Вы готовы запустить приложение с Xbox!
    
## Аспекты UX для PWAs на Xbox

### Проектирование для "10-foot experience"

Xbox One считается "экраном на большом экране". Это означает, что ваши пользователи, скорее всего, будут сходить на 10 метров от экрана. Таким образом, подумайте, как ваше приложение может использоваться на этом расстоянии, в отличие от обычного браузера на настольном компьютере с помощью мыши и клавиатуры. Рекомендации по проектированию и проектированию дизайна и UX- и [видеопроекты для Xbox и телевизора.](/windows/uwp/design/devices/designing-for-tv)

### Understand the "TV SafeZone"

Производители телевизоров будут применять ["безопасную зону"](/windows/uwp/design/devices/designing-for-tv#tv-safe-area) к содержимому, которое может обрезать ваше приложение. По умолчанию мы применяем безопасную границу вокруг вашего приложения, чтобы учесть это, однако вы можете убедиться, что ваше приложение принимает весь размер экрана, вызывая и [`setDesiredBoundsMode`](/uwp/api/windows.ui.viewmanagement.applicationview.setdesiredboundsmode) [`useCoreWindow`](/uwp/api/windows.ui.viewmanagement.applicationviewboundsmode) указав:

```javascript
var applicationView = Windows.UI.ViewManagement.ApplicationView.getForCurrentView();
applicationView.setDesiredBoundsMode(Windows.UI.ViewManagement.ApplicationViewBoundsMode.useCoreWindow);
```  

Подробнее: документация [`Windows.UI.ViewManagement`](/uwp/api/windows.ui.viewmanagement) по пространству имен.

### Управление фокусом по ОСЯм и навигацией

Методы ввода пользователя для Xbox — это игровой контроллер или пульт дистанционного управления, которые используют систему [навигации X И](/windows/uwp/design/devices/designing-for-tv#xy-focus-navigation-and-interaction)И, что позволяет пользователю сместить фокус с управления на управление, двигаясь вверх, вниз, влево и вправо.

Поэтому вам необходимо убедиться, что ваше приложение хорошо работает с навигацией по X И. Кроме того, обязательно отключите режим [мыши, **](/windows/uwp/xbox-apps/how-to-disable-mouse-mode)который по умолчанию включается для приложений UWP (и, вероятно, не применим к вашему приложению для Xbox).

Следующий код отключит режим и включает ввод с помощью игрового устройства для `mouse` создания событий клавиатуры DOM:

```javascript
navigator.gamepadInputEmulation = "keyboard";
```  

Кроме того, можно указать, что также отключит мышь, не создает события клавиатуры DOM и позволяет использовать стандартные веб-API `gamepad` и(или) API игрового устройства WinRT.

Чтобы включить направленную навигацию, ознакомьтесь с библиотекой [TVJS,](#tvjs)которая обсуждается далее.

### TVJS

[TVJS — это коллекция](https://github.com/Microsoft/TVHelpers) библиотек-помощников, которые упрощают создание веб-приложений для телевизора. Если вы строите веб-приложение, которое также будет работать на Xbox, ** TVJS может помочь добавить поддержку направленной навигации, а также предоставить несколько элементов управления, которые упрощают взаимодействие с содержимым на телевизоре.

[Направленная навигация](https://github.com/Microsoft/TVHelpers/wiki/Using-DirectionalNavigation) — это функция TVJS, которая обеспечивает автоматическую двухмерную навигацию на страницах вашего приложения телевизора. С его помощью нет необходимости ловить и обрабатывать навигацию на страницах приложения или явно указывать все допустимые целевые объекты фокуса для каждого элемента в пользовательском интерфейсе. Автоматическая обработка фокуса позволяет пользователям перемещаться интуитивно и надежно.

Когда пользователь переходит по пользовательскому интерфейсу приложения с помощью кнопок направления контроллера, алгоритм автоматического фокуса ищет набор потенциальных целевых объектов фокуса, определяет следующий элемент для перемещения, а затем автоматически устанавливает фокус на этот элемент. Чтобы определить следующий элемент, алгоритм объединяет направление ввода, историю фокуса и физический макет элементов пользовательского интерфейса на странице.

Чтобы включить направленную навигацию, включим следующую ссылку на сценарий:

```html
<script src="directionalnavigation-1.0.0.0.js"></script>
```  

По умолчанию фокусируемыми являются только элементы , `<a>` `<button>` , и `<input>` `<select>` `<textarea>` элементы. Чтобы включить фокус на других элементах, назначьте им допустимый [табиндекс.](https://developer.mozilla.org/docs/Web/HTML/Global_attributes/tabindex)

```html
<div tabindex="0″>This div is eligible for focus</div>
```  

Ознакомьтесь с документацией [DirectionalNavigation,](https://github.com/Microsoft/TVHelpers/wiki/DirectionalNavigation) чтобы узнать, как изменить корневой элемент, установить начальный фокус, переопредить следующий фокус, оптимизировать элементы управления для фокуса, настроить ввод. Кроме того, существует ряд других полезных примеров.

## Media PWAs на Xbox

Если вы строите PWA для воспроизведения мультимедиа для Xbox One, учитывайте следующие моменты.

### Зашифрованные расширения мультимедиа (EME) в браузере

Браузер Microsoft Edge на Xbox [](https://developer.mozilla.org/docs/Web/API/Encrypted_Media_Extensions_API) One не поддерживает зашифрованные расширения мультимедиа (EME). Если ваш PWA мультимедиа использует его для управления цифровыми правами (DRM), вы не сможете запустить его из браузера на xbox. Вместо этого прототип и тестирование приложения для Xbox One с [помощью PWABuilder или Visual Studio,](#deploying-and-testing-pwas-on-xbox)как описано выше. Вы также можете запустить его в браузере Microsoft Edge в Windows, где emE полностью поддерживается.

### Интеграция с системными средствами управления транспортировкой мультимедиа

Если ваше приложение является приложением мультимедиа, важно, чтобы оно реагировало на элементы управления мультимедиа, инициированные пользователем, с помощью экранных кнопок, голосовых команд Кортаны, системных элементов управления транспортировкой мультимедиа в области переноса мультимедиа или приложений [Xbox](https://www.microsoft.com/p/xbox/9wzdncrfjbd8
) [и Xbox One SmartGlass](https://www.microsoft.com/p/xbox-one-smartglass/9wzdncrfhvx2) на других устройствах. [](https://support.xbox.com/xbox-one/console/cortana-voice-commands) [](/windows/uwp/audio-video-camera/system-media-transport-controls) Посмотрите на элемент управления [MediaPlayer](https://github.com/Microsoft/TVHelpers/wiki/MediaPlayer-Overview) из библиотеки [TVJS,](#tvjs)которая автоматически интегрируется с этими средствами управления. Кроме того, вы можете [вручную интегрироваться с системными](https://msdn.microsoft.com/windows/uwp/audio-video-camera/system-media-transport-controls)средствами управления транспортировкой мультимедиа.

### Шифрование содержимого PlayReady

На момент написания [ `cbcs` ](/playready/packaging/content-encryption-modes#support-for-the-cbcs-aes-cbc-encryption-scheme) этой статьи поддержка кодивинга ограничена клиентом PlayReady для XBox One (версия 1709 или выше). Если мультимедиа для PWA поддерживает только шифрование *CBCS,* следует помнить, что функциональные возможности вашего приложения, скорее всего, будут ограничены (или полностью недоступны) в Windows.

## См. также
[South Записи Видео](https://github.com/Microsoft/uwp-experiences/tree/master/apps/video): пример видео приложения для Xbox, построенного React.js и размещенного на веб-сервере.

[Проектирование для Xbox и телевизора:](/windows/uwp/design/devices/designing-for-tv)разработка приложения универсальной платформы Windows (UWP) таким образом, чтобы оно хорошо выглядело и хорошо функционирует на Xbox One и на экранах телевизора.

[Лучшие методики xbox:](/windows/uwp/xbox-apps/tailoring-for-xbox)следуйте этим методикам, чтобы адаптировать приложение для Xbox One.

[PWAS в Microsoft Store:](/microsoft-edge/progressive-web-apps-edgehtml/microsoft-store)вот как (и почему) отправить PWA в Microsoft Store.

[UWP на Xbox One](/windows/uwp/xbox-apps/): полное руководство по разработке приложений UWP для Xbox One.
